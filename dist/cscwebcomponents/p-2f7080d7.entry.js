import{r as t,c as i,h as s,H as e,g as n}from"./p-d0418cc2.js";import{l as r,h}from"./p-5b81ca3e.js";import{v as o}from"./p-ad90fe4d.js";const a=":host{--csc-border-radius:4px;--csc-dark-grey:rgb(89, 89, 89);--csc-error:#e71d32;--csc-font-family:'museo-sans', sans-serif;--csc-light-grey:rgb(223, 225, 227);--csc-light-grey-blue:rgb(204, 244, 240);--csc-lightest-grey:rgba(223, 225, 227, 0.5);--csc-link:#025B97;--csc-mid-grey:rgb(140, 140, 140);--csc-primary:rgb(0, 103, 120);--csc-primary-ghost:rgba(0, 103, 120, 0.15);--csc-primary-ghost-hover:rgba(0, 103, 120, 0.25);--csc-primary-hover:rgb(80, 151, 141);--csc-primary-text-hover:rgba(0, 103, 120, 0.15);--csc-success:#51a808;--csc-warning:#ff5800}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}.md-ripple{display:block;position:absolute;pointer-events:none;border-radius:50%;transform:scale(0);background:currentColor;opacity:0.3}.md-ripple.animate{animation:mdRipple 0.7s backwards linear}:host{font-family:var(--csc-font-family)}@keyframes mdRipple{100%{opacity:0;transform:scale(2.5)}}::-ms-reveal{display:none}:host{display:block;cursor:text}.c-input-menu__chevron{fill:currentColor;height:22px;width:22px;min-width:22px;transform:rotate(0deg);transition:transform 0.3s ease-in-out}.c-input-menu__chevron--active{transform:rotate(180deg)}.c-input-menu__input{width:100%;display:flex}.c-input-menu__item-wrapper{position:absolute;width:100%;top:44px;z-index:10;margin-left:calc(var(--c-label-position) * -1)}.c-input-menu__item-wrapper--shadow{top:47px}.c-input-menu__items{position:absolute;background-color:#ffffff;min-width:calc(100% + 24px);box-shadow:0 8px 16px 0 rgba(0, 0, 0, 0.2);z-index:10;user-select:none;border-radius:4px;margin:0 -12px;overflow-y:scroll;list-style:none;padding:0}.c-input-menu__items--hidden{display:none}.c-input-menu__items li{cursor:pointer;display:flex;height:48px;padding:0 12px;transition:background-color 0.3s;font-size:14px;align-items:center;justify-content:flex-start;color:rgba(0, 0, 0, 0.87)}.c-input-menu__items li.dense{padding:10px 14px}.c-input-menu__items li:hover{background-color:var(--csc-primary-text-hover)}.c-input-menu__items li[aria-selected=true]{background-color:var(--csc-primary-text-hover)}.c-input-menu__items li.none{color:rgba(0, 0, 0, 0.5)}.c-input-menu__items--empty li{color:rgba(0, 0, 0, 0.54);cursor:default;gap:8px;pointer-events:none}.c-input-menu__items--empty li svg{fill:currentColor;height:18px;width:18px}input{max-height:32px;padding:8px 0 8px;background-color:transparent;border:none;color:rgba(0, 0, 0, 0.87);flex:1 1 auto;font-family:\"museo-sans\", sans-serif;font-size:16px;line-height:20px;max-width:100%;min-width:0;width:100%;pointer-events:none}input:focus,input:active{outline:none}input::-ms-reveal{display:none}svg{fill:currentColor;height:22px;width:22px}.c-input--disabled{color:var(--csc-mid-grey)}.c-input:focus-within{color:var(--csc-primary)}.c-input--error{color:var(--csc-error)}.c-input--error:focus-within{color:var(--csc-error)}.visuallyhidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}";const l=class{constructor(s){t(this,s);this.changeQuery=i(this,"changeQuery",7);this.changeValue=i(this,"changeValue",3);this._itemRefs=[];this._uniqueId=o();this._direction=null;this._debounce=null;this._observer=new IntersectionObserver(((t,i)=>{t.forEach((t=>{if(!t.isIntersecting){t.target.scrollIntoView({block:this._direction,inline:"nearest"});i.unobserve(t.target)}else{i.unobserve(t.target)}}))}),{threshold:1});this.autofocus=false;this.customMenu=false;this.disabled=false;this.hideDetails=false;this.hint="";this.hostId=undefined;this.shadow=false;this.name=undefined;this.label=undefined;this.query=null;this.value=null;this.dense=undefined;this.required=false;this.valid=true;this.validate=false;this.validateOnBlur=false;this.validation="Required field";this.placeholder="";this.returnValue=undefined;this.items=[];this.itemsPerPage=undefined;this.menuVisible=false;this.currentIndex=null;this.statusText=""}async setValue(t,i){this._select(t,i)}_valueChangedHandler(t){function i(i){return i===t}this.currentIndex=this.items.findIndex(i);const s=this.returnValue?t===null||t===void 0?void 0:t.value:t;this.changeValue.emit(s)}watchHandler(t,i){if(t.length!==i.length){this.currentIndex=!!t.length?0:null;this._updateStatusText()}}handleKeyDown(t){if(t.key==="Escape"){this.menuVisible=false;this.currentIndex=null;return}if(t.key==="Tab"){this.menuVisible=false;const t=this.items[this.currentIndex];if(!t)return;const{name:i,value:s}=t;this.query=i;this.changeValue.emit(this.returnValue?s:t)}if(t.key==="ArrowDown"){this._direction="end";t.preventDefault();if(!this.menuVisible){this.menuVisible=true;return}if(this.currentIndex===null){this.currentIndex=0}else if(this.currentIndex+1<this.items.length){this.currentIndex+=1}if(this.customMenu&&this.currentIndex>0){const t=this._getItemRef(this.currentIndex);const i=this._getItemRef(this.currentIndex-1);i.toggleAttribute("aria-selected");t.setAttribute("aria-selected","true")}this._scrollToElement()}if(t.key==="ArrowUp"){this._direction="start";t.preventDefault();if(!this.menuVisible){this.menuVisible=true;return}if(this.currentIndex>0){this.currentIndex-=1}else if(this.currentIndex===null){this.currentIndex=this.items.length-1}if(this.customMenu&&this.currentIndex>=0){const t=this._getItemRef(this.currentIndex);const i=this._getItemRef(this.currentIndex+1);i.toggleAttribute("aria-selected");t.setAttribute("aria-selected","true")}this._scrollToElement()}if(t.keyCode===32){if(!this.menuVisible){this.menuVisible=true;t.preventDefault()}}if(t.key==="Enter"){if(this.currentIndex!==null){const i=this.items[this.currentIndex];this._select(t,i);this.menuVisible=false}}}_getItemRef(t){var i;const s=(i=this._itemRefs.find((i=>i.value===this.items[t].value)))===null||i===void 0?void 0:i.ref;return s}_scrollToElement(){if(this.items.length>this.itemsPerPage){const t=this._getItemRef(this.currentIndex);if(!!t){this._observer.observe(t)}}this._updateStatusText()}_updateStatusText(){this.statusText=this.query;if(this._debounce!==null){clearTimeout(this._debounce);this._debounce=null}this._debounce=window.setTimeout((()=>{const t=this.items.length===1?"suggestion":"suggestions";const i=!!this.items.length?", to navigate use up and down arrows":".";const s=this.host.shadowRoot.querySelector('li[aria-selected="true"]');const e=!!s?`. ${s.innerHTML} ${s.ariaPosInSet} of ${s.ariaSetSize} is highlighted`:null;this.statusText=`${this.items.length} ${t} found${e||i}`;this._debounce=null}),1400)}handleChange(t){this.menuVisible=true;this.query=t.target.value;this.changeQuery.emit(this.query);this.changeValue.emit(null);if(!this.query.length){this.statusText=""}}_select(t,i){t.preventDefault();t.stopPropagation();this.query=i.name;this.value=i;this._valueChangedHandler(i);this.menuVisible=false}componentWillLoad(){var t,i;this._id=(i=(t=this.hostId)===null||t===void 0?void 0:t.replace(/[^a-zA-Z0-9-_]/g,""))!==null&&i!==void 0?i:this._uniqueId;this._inputId="input_"+(this.hostId||this.label||this.placeholder).replace(/[^a-zA-Z0-9-_]/g,"")}componentDidLoad(){window.addEventListener("click",(t=>{if(!t.target.matches("c-autocomplete")){this.menuVisible=false;this.currentIndex=null}}))}disconnectedCallback(){this._observer.disconnect()}_getActiveListItemId(){return`option--${this._id}-${this.currentIndex}`}_handleFocus(t){const{value:i}=t.target;if(!!i){this.menuVisible=true}this.statusText="";this._updateStatusText()}_renderChevron(){const t={"c-input-menu__chevron":true,"c-input-menu__chevron--active":this.menuVisible};return s("svg",{class:t,viewBox:"0 0 24 24"},s("path",{d:r}))}_renderEmptyMenu(){return s("ul",{class:"c-input-menu__items c-input-menu__items--empty"},s("li",{tabindex:"-1"},s("svg",{viewBox:"0 0 24 24"},s("path",{d:h})),"No suggestions found"))}_renderCustomMenu(t){if(this.currentIndex===0&&this.menuVisible){const t=document.querySelectorAll('div[aria-selected = "true"]');if(t.length===1){t[0].toggleAttribute("aria-selected")}const i=this._getItemRef(this.currentIndex);i.setAttribute("aria-selected","true")}return s("div",{class:{"c-input-menu__item-wrapper":true,"c-input-menu__item-wrapper--shadow":this.shadow}},!!this.items.length&&this.menuVisible&&s("div",{id:"results_"+this._id,class:this.menuVisible?"c-input-menu__items":"c-input-menu__items c-input-menu__items--hidden",style:t},s("slot",{name:"customMenu"})),!this.items.length&&this.menuVisible&&this.query.length>0&&this._renderEmptyMenu())}_renderMenu(t){return s("div",{class:{"c-input-menu__item-wrapper":true,"c-input-menu__item-wrapper--shadow":this.shadow}},!!this.items.length&&s("ul",{id:"results_"+this._id,class:this.menuVisible?"c-input-menu__items":"c-input-menu__items c-input-menu__items--hidden",role:"listbox",style:t},this.menuVisible&&this.items.map(((t,i)=>s("li",{id:`option--${this._id}-${i}`,"aria-posinset":(i+1).toString(),"aria-setsize":this.items.length.toString(),"aria-selected":(this.currentIndex===i).toString(),role:"option",tabindex:"-1",ref:i=>{t.ref=i;this._itemRefs.push({value:t.value,ref:i})},onClick:i=>this._select(i,t)},t.name)))),!this.items.length&&this.menuVisible&&this._renderEmptyMenu())}_renderInputElement(){var t;return s("div",{class:"c-input-menu__input"},s("input",{type:"text","aria-expanded":this.menuVisible.toString(),"aria-owns":"results_"+this._id,"aria-autocomplete":"list","aria-activedescendant":this._getActiveListItemId(),autocomplete:"off",class:"c-input__input",role:"combobox",value:this.query,name:(t=this.name)!==null&&t!==void 0?t:null,onInput:t=>this.handleChange(t),onFocus:t=>this._handleFocus(t)}))}render(){this._itemRefs=[];let t={};if(this.itemsPerPage&&this.itemsPerPage>0&&this.items.length>this.itemsPerPage){t={"max-height":48*this.itemsPerPage+"px"}}if(this.customMenu){const t=document.querySelectorAll('[slot="customMenu"]');for(let i=0;i<this.items.length;i++){this._itemRefs.push({value:this.items[i].value,ref:t[i]})}}return s(e,null,s("div",{id:"announce-"+this._id,class:"visuallyhidden","aria-live":"polite","aria-atomic":"true"},this.statusText),s("c-input",{autofocus:this.autofocus,disabled:this.disabled,"hide-details":this.hideDetails,hint:this.hint,id:this.hostId,"input-id":this._inputId,label:this.label,name:this.name,placeholder:this.placeholder,required:this.required,shadow:this.shadow,valid:this.valid,validate:this.validate,"validate-on-blur":this.validateOnBlur,validation:this.validation,value:this.query},s("slot",{name:"pre",slot:"pre"}),s("div",{class:"c-input__content"},this._renderInputElement(),this.customMenu?this._renderCustomMenu(t):this._renderMenu(t),this._renderChevron()),s("slot",{name:"post",slot:"post"})))}get host(){return n(this)}static get watchers(){return{items:["watchHandler"]}}};l.style=a;export{l as c_autocomplete};
//# sourceMappingURL=p-2f7080d7.entry.js.map