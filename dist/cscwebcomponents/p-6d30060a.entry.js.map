{"version":3,"names":["ClickOutsideOptionsDefaults","triggerEvents","exclude","registerClickOutside","component","element","callback","opt","excludedNodes","getExcludedNodes","getTriggerEvents","forEach","triggerEvent","window","addEventListener","e","initClickOutside","event","target","contains","isExcluded","call","split","map","trim","Array","from","document","querySelectorAll","err","console","warn","excudedNodes","excludedNode","cInputMenuCss","CSelect","this","_itemRefs","_outerWrapperClasses","_uniqueId","uuid","_validationClasses","_debounce","_observer","IntersectionObserver","entries","observer","entry","isIntersecting","scrollIntoView","block","inline","unobserve","threshold","_lastKeyPressTime","_searchString","_blurred","_getListItem","item","index","isActive","items","currentIndex","classes","none","value","itemId","replace","_id","a11y","role","toString","length","h","Object","assign","id","ref","el","push","class","onClick","_select","name","validateChange","newValue","_runValidate","onCurrentIndexChange","_a","_listElement","children","activeListItemId","_c","_b","_updateStatusText","_valueChangedHandler","isItem","findIndex","returnValue","previousValue","changeValue","emit","_getLabel","includes","find","_scrollToElement","itemsPerPage","itemRef","observe","handleKeyDown","ev","disabled","letterNumber","key","match","Date","now","selectedItem","i","toLowerCase","startsWith","menuVisible","preventDefault","input","host","shadowRoot","querySelector","focus","_selectItem","componentWillLoad","hostId","_inputId","label","placeholder","componentDidLoad","disconnectedCallback","disconnect","_showMenu","_inputElement","setTimeout","_hideMenu","stopPropagation","required","validateOnBlur","filter","c","_renderChevron","viewBox","d","mdiChevronDown","_renderInputElement","autocomplete","type","readonly","_renderMenu","style","shadow","title","clearTimeout","ending","selection","selectionText","innerHTML","ariaPosInSet","ariaSetSize","statusText","render","itemsPerPageStyle","Host","autofocus","hideDetails","hint","valid","validate","validation","variant","slot"],"sources":["./node_modules/stencil-click-outside/dist/esm/index.js","./src/components/c-input/c-input-menu.scss?tag=c-select&encapsulation=shadow","./src/components/c-select/c-select.tsx"],"sourcesContent":["import { Build as BUILD, getElement } from '@stencil/core';\nconst ClickOutsideOptionsDefaults = {\n    triggerEvents: \"click\",\n    exclude: \"\"\n};\n/**\n * Call this function as soon as the click outside of annotated method's host is done.\n * @example\n```\n@ClickOutside()\ncallback() {\n  // this will run when click outside of element (host component) is done.\n}\n```\n */\nexport function ClickOutside(opt = ClickOutsideOptionsDefaults) {\n    return (proto, methodName) => {\n        // this is to resolve the 'compiler optimization issue':\n        // lifecycle events not being called when not explicitly declared in at least one of components from bundle\n        BUILD.connectedCallback = true;\n        BUILD.disconnectedCallback = true;\n        const { connectedCallback, disconnectedCallback } = proto;\n        proto.connectedCallback = function () {\n            const host = getElement(this);\n            const method = this[methodName];\n            registerClickOutside(this, host, method, opt);\n            return connectedCallback && connectedCallback.call(this);\n        };\n        proto.disconnectedCallback = function () {\n            const host = getElement(this);\n            const method = this[methodName];\n            removeClickOutside(this, host, method, opt);\n            return disconnectedCallback && disconnectedCallback.call(this);\n        };\n    };\n}\n/**\n * Register callback function for HTMLElement to be executed when user clicks outside of element.\n * @example\n```\n<span\n    ref={spanEl => registerClickOutside(this, spanEl, () => this.test())}>\n      Hello, World!\n</span>;\n```\n */\nexport function registerClickOutside(component, element, callback, opt = ClickOutsideOptionsDefaults) {\n    const excludedNodes = getExcludedNodes(opt);\n    getTriggerEvents(opt).forEach(triggerEvent => {\n        window.addEventListener(triggerEvent, (e) => {\n            initClickOutside(e, component, element, callback, excludedNodes);\n        }, false);\n    });\n}\n/**\n * Remove click outside callback function for HTMLElement.\n */\nexport function removeClickOutside(component, element, callback, opt = ClickOutsideOptionsDefaults) {\n    getTriggerEvents(opt).forEach(triggerEvent => {\n        window.removeEventListener(triggerEvent, (e) => {\n            initClickOutside(e, component, element, callback);\n        }, false);\n    });\n}\nfunction initClickOutside(event, component, element, callback, excludedNodes) {\n    const target = event.target;\n    if (!element.contains(target) && !isExcluded(target, excludedNodes)) {\n        callback.call(component);\n    }\n}\nfunction getTriggerEvents(opt) {\n    if (opt.triggerEvents) {\n        return opt.triggerEvents.split(\",\").map(e => e.trim());\n    }\n    return [\"click\"];\n}\nfunction getExcludedNodes(opt) {\n    if (opt.exclude) {\n        try {\n            return Array.from(document.querySelectorAll(opt.exclude));\n        }\n        catch (err) {\n            console.warn(`@ClickOutside: Exclude: '${opt.exclude}' will not be evaluated. Check your exclude selector syntax.`, err);\n        }\n    }\n    return;\n}\nfunction isExcluded(target, excudedNodes) {\n    if (target && excudedNodes) {\n        for (let excludedNode of excudedNodes) {\n            if (excludedNode.contains(target)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n",":host {\n  display: block;\n  cursor: text;\n}\n\n.c-input-menu {\n  &__chevron {\n    fill: currentColor;\n    height: 22px;\n    width: 22px;\n    min-width: 22px;\n    transform: rotate(0deg);\n    transition: transform 0.3s ease-in-out;\n\n    &--active {\n      transform: rotate(180deg);\n    }\n  }\n\n  &__input {\n    width: 100%;\n    display: flex;\n  }\n\n  &__item-wrapper {\n    position: absolute;\n    width: 100%;\n    top: 44px;\n    z-index: 10;\n    margin-left: calc(var(--c-label-position) * -1);\n\n    &--shadow {\n      top: 47px;\n    }\n  }\n\n  &__items {\n    position: absolute;\n    background-color: #ffffff;\n    min-width: calc(100% + 24px);\n    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);\n    z-index: 10;\n    user-select: none;\n    border-radius: 4px;\n    margin: 0 -12px;\n    overflow-y: scroll;\n    list-style: none;\n    padding: 0;\n\n    &--hidden {\n      display: none;\n    }\n\n    li {\n      cursor: pointer;\n      display: flex;\n      height: 48px;\n      padding: 0 12px;\n      transition: background-color 0.3s;\n      font-size: 14px;\n      align-items: center;\n      justify-content: flex-start;\n      color: rgba(0, 0, 0, 0.87);\n\n      &.dense {\n        padding: 10px 14px;\n      }\n\n      &:hover {\n        background-color: var(--csc-primary-text-hover);\n      }\n\n      &[aria-selected='true'] {\n        background-color: var(--csc-primary-text-hover);\n      }\n\n      &.none {\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n\n    &--empty {\n      li {\n        color: rgba(0, 0, 0, 0.54);\n        cursor: default;\n        gap: 8px;\n        pointer-events: none;\n\n        svg {\n          fill: currentColor;\n          height: 18px;\n          width: 18px;\n        }\n      }\n    }\n  }\n}\n\ninput {\n  max-height: 32px;\n  padding: 8px 0 8px;\n  background-color: transparent;\n  border: none;\n  color: rgba(0, 0, 0, 0.87);\n  flex: 1 1 auto;\n  font-family: $csc-font-family;\n  font-size: 16px;\n  line-height: 20px;\n  max-width: 100%;\n  min-width: 0;\n  width: 100%;\n  pointer-events: none;\n\n  &:focus,\n  &:active {\n    outline: none;\n  }\n\n  &::-ms-reveal {\n    display: none;\n  }\n}\n\nsvg {\n  fill: currentColor;\n  height: 22px;\n  width: 22px;\n}\n\n.c-input {\n  $this: &;\n\n  &--disabled {\n    color: var(--csc-mid-grey);\n  }\n\n  &:focus-within {\n    color: var(--csc-primary);\n  }\n\n  &--error {\n    color: var(--csc-error);\n\n    &:focus-within {\n      color: var(--csc-error);\n    }\n  }\n}\n\n.visuallyhidden {\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n","import {\n  Component,\n  Element,\n  Host,\n  Prop,\n  State,\n  h,\n  Listen,\n  Event,\n  EventEmitter,\n  Watch,\n} from '@stencil/core';\nimport { mdiChevronDown } from '@mdi/js';\nimport { registerClickOutside } from 'stencil-click-outside';\nimport { v4 as uuid } from 'uuid';\nimport { CSelectItem } from '../../types';\n\n/**\n * @group Form\n */\n@Component({\n  tag: 'c-select',\n  styleUrl: '../c-input/c-input-menu.scss',\n  shadow: true,\n})\nexport class CSelect {\n  /**\n   * Auto focus the input\n   */\n  @Prop() autofocus = false;\n\n  /**\n   * Disable the input\n   */\n  @Prop() disabled = false;\n\n  /**\n   * Hide the hint and error messages\n   */\n  @Prop() hideDetails = false;\n\n  /**\n   * Hint text for the input\n   */\n  @Prop() hint = '';\n\n  /**\n   * Id of the element\n   */\n  @Prop({ attribute: 'id' }) hostId: string;\n\n  /**\n   * Element label\n   */\n  @Prop() label: string;\n\n  /**\n   * Shadow variant\n   */\n  @Prop() shadow = false;\n\n  /**\n   * Input field name\n   */\n  @Prop() name: string;\n\n  /**\n   * Set as required\n   */\n  @Prop() required = false;\n\n  /**\n   * Return only the item value rather than the whole item object\n   */\n  @Prop() returnValue: false;\n\n  /**\n   * Set the validÃ­ty of the input\n   */\n  @Prop() valid = true;\n\n  /**\n   * Manual validation\n   */\n  @Prop() validate = false;\n\n  /**\n   * Validate the input on blur\n   */\n  @Prop() validateOnBlur = false;\n\n  /**\n   * Custom validation message\n   */\n  @Prop() validation = 'Required field';\n\n  /**\n   * Items per page before adding scroll\n   */\n  @Prop() itemsPerPage = 6;\n\n  /**\n   * Placeholder text\n   */\n  @Prop() placeholder = '';\n\n  /**\n   * Selected item\n   */\n  @Prop({ mutable: true }) value: string | number | boolean | CSelectItem =\n    null;\n\n  /**\n   * selectable items\n   */\n  @Prop() items: CSelectItem[] = [];\n\n  /**\n   * Triggered when an item is selected\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter;\n\n  @Element() host: HTMLCSelectElement;\n\n  @State() menuVisible = false;\n\n  @State() currentIndex: number = null;\n\n  @State() activeListItemId: string = null;\n\n  @State() statusText = '';\n\n  @State() previousValue: CSelectItem = { value: '', name: '' };\n\n  private _itemRefs: { value: string | number | boolean; ref: HTMLElement }[] =\n    [];\n\n  private _id: string;\n\n  private _inputElement: HTMLInputElement;\n\n  private _listElement: HTMLUListElement;\n\n  private _outerWrapperClasses = ['outer-wrapper'];\n\n  private _uniqueId = uuid();\n\n  private _validationClasses = ['validation-message'];\n\n  private _debounce = null;\n\n  private _observer = new IntersectionObserver(\n    (entries, observer) => {\n      entries.forEach((entry) => {\n        if (!entry.isIntersecting) {\n          entry.target.scrollIntoView({\n            block: 'nearest',\n            inline: 'nearest',\n          });\n          observer.unobserve(entry.target);\n        } else {\n          observer.unobserve(entry.target);\n        }\n      });\n    },\n    { threshold: 1 },\n  );\n\n  @Watch('validate')\n  validateChange(newValue: boolean) {\n    if (newValue) {\n      this._runValidate();\n    }\n  }\n\n  @Watch('currentIndex')\n  onCurrentIndexChange(index: number) {\n    const items = Array.from(this._listElement?.children || []);\n\n    this.activeListItemId = items[index]?.id ?? null;\n    this._updateStatusText();\n  }\n\n  private _valueChangedHandler(item: CSelectItem) {\n    function isItem(element) {\n      return element.value === item?.value;\n    }\n\n    this.currentIndex = this.items.findIndex(isItem);\n\n    const value = this.returnValue\n      ? item?.value\n      : {\n          name: item?.name,\n          value: item?.value,\n        };\n\n    if (this.previousValue.value === item?.value) return;\n\n    this.previousValue = item;\n\n    this.changeValue.emit(value);\n  }\n\n  private _getLabel() {\n    if (\n      this.returnValue &&\n      ['number', 'string', 'boolean'].includes(typeof this.value)\n    ) {\n      return this.items?.find((item) => item.value === this.value)?.name;\n    }\n\n    return (this.value as CSelectItem)?.name;\n  }\n\n  private _scrollToElement() {\n    if (this.items.length > this.itemsPerPage) {\n      const itemRef = this._itemRefs.find(\n        (item) => item.value === this.items[this.currentIndex].value,\n      )?.ref;\n\n      if (!!itemRef) {\n        this._observer.observe(itemRef);\n      }\n    }\n  }\n\n  @Listen('keydown', { capture: true })\n  handleKeyDown(ev: KeyboardEvent) {\n    if (this.disabled) return;\n\n    const letterNumber = /^[0-9a-zA-Z]+$/;\n\n    if (ev.key.match(letterNumber) && ev.key.length === 1) {\n      if (\n        Date.now() - this._lastKeyPressTime > 3000 ||\n        this._searchString.length > 2\n      ) {\n        this._searchString = ev.key;\n      } else {\n        this._searchString = `${this._searchString}${ev.key}`;\n      }\n\n      this._lastKeyPressTime = Date.now();\n      const selectedItem = this.items.find((i) =>\n        i.name.toLowerCase().startsWith(this._searchString),\n      );\n      function isItem(element) {\n        return element === selectedItem;\n      }\n\n      if (selectedItem) {\n        if (this.menuVisible) {\n          this.currentIndex = this.items.findIndex(isItem);\n          this._scrollToElement();\n        } else {\n          this.value = selectedItem;\n          this._valueChangedHandler(selectedItem);\n        }\n      }\n    }\n\n    if (ev.key === 'Home' && this.menuVisible) {\n      ev.preventDefault();\n      this.currentIndex = 0;\n    }\n\n    if (ev.key === 'End' && this.menuVisible) {\n      ev.preventDefault();\n      this.currentIndex = this.items.length - 1;\n    }\n\n    if (ev.key === 'Tab') {\n      this.menuVisible = false;\n    }\n\n    if (ev.key === 'ArrowDown') {\n      ev.preventDefault();\n\n      this.menuVisible = true;\n\n      if (this.currentIndex === null) {\n        this.currentIndex = 0;\n      } else if (this.currentIndex + 1 < this.items.length) {\n        this.currentIndex += 1;\n      }\n    }\n\n    if (ev.key === 'ArrowUp') {\n      ev.preventDefault();\n\n      this.menuVisible = true;\n\n      if (this.currentIndex > 0) {\n        this.currentIndex -= 1;\n      } else if (this.currentIndex === null) {\n        this.currentIndex = this.items.length - 1;\n      }\n    }\n\n    if (ev.key === ' ') {\n      if (!this.menuVisible) {\n        this.menuVisible = true;\n      }\n    }\n\n    if (ev.key === 'Escape') {\n      const input = this.host.shadowRoot.querySelector('input');\n\n      if (this.menuVisible) {\n        this.menuVisible = false;\n        input.focus();\n      }\n    }\n\n    if (ev.key === 'Enter') {\n      this.menuVisible = !this.menuVisible;\n\n      if (this.currentIndex !== null) {\n        this._selectItem();\n      }\n    }\n  }\n\n  componentWillLoad() {\n    this._id = this.hostId?.replace(/[^a-zA-Z0-9-_]/g, '') ?? this._uniqueId;\n    this._inputId =\n      'input_' +\n      (this.hostId || this.label || this.placeholder).replace(\n        /[^a-zA-Z0-9-_]/g,\n        '',\n      );\n  }\n\n  componentDidLoad() {\n    if (\n      (this.value || typeof this.value === 'boolean') &&\n      !this.currentIndex &&\n      this.currentIndex !== 0\n    ) {\n      this.currentIndex = this.items.findIndex(\n        (item) => item.value === this.value,\n      );\n    }\n  }\n\n  disconnectedCallback() {\n    this._observer.disconnect();\n  }\n\n  private _inputId: string;\n\n  private _lastKeyPressTime = null;\n\n  private _searchString = '';\n\n  private _blurred = false;\n\n  private _selectItem() {\n    const selectedItem = this.items[this.currentIndex];\n    this.value = selectedItem;\n    this._valueChangedHandler(selectedItem);\n    this._scrollToElement();\n  }\n\n  private _showMenu() {\n    if (this.disabled) return;\n\n    this._inputElement.focus();\n\n    // Hack needed to open the menu within a Vue web component\n    setTimeout(() => {\n      this.menuVisible = true;\n    }, 0);\n  }\n\n  private _hideMenu() {\n    this.menuVisible = false;\n    this._blurred = true;\n  }\n\n  private _select(event, item) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.value = item;\n    this._valueChangedHandler(item);\n    this.menuVisible = false;\n  }\n\n  private _getListItem = (item: CSelectItem, index: number) => {\n    const isActive = this.items[this.currentIndex] === item;\n\n    const classes = {\n      none: item.value === null,\n    };\n\n    let itemId = 'none';\n\n    if (typeof item?.value === 'string') {\n      itemId = item.value.replace(/[^a-zA-Z0-9-_]/g, '');\n    }\n\n    itemId = `item_${this._id}--${itemId}`;\n\n    const a11y = {\n      role: 'option',\n      'aria-posinset': (index + 1).toString(),\n      'aria-setsize': this.items.length.toString(),\n    };\n\n    if (isActive) {\n      a11y['aria-selected'] = 'true';\n    }\n\n    return (\n      <li\n        {...a11y}\n        id={itemId}\n        ref={(el) =>\n          this._itemRefs.push({ value: item.value, ref: el as HTMLElement })\n        }\n        class={classes}\n        onClick={(event) => this._select(event, item)}\n      >\n        {item.name}\n      </li>\n    );\n  };\n\n  private _runValidate() {\n    if (\n      this.required &&\n      !this.value &&\n      (this._blurred || !this.validateOnBlur)\n    ) {\n      this._outerWrapperClasses.push('required');\n      this._validationClasses.push('show');\n    } else {\n      this._outerWrapperClasses = this._outerWrapperClasses.filter(\n        (c) => c !== 'required',\n      );\n      this._validationClasses = this._validationClasses.filter(\n        (c) => c !== 'show',\n      );\n    }\n  }\n\n  private _renderChevron() {\n    const classes = {\n      'c-input-menu__chevron': true,\n      'c-input-menu__chevron--active': this.menuVisible,\n    };\n\n    return (\n      <svg class={classes} viewBox=\"0 0 24 24\">\n        <path d={mdiChevronDown} />\n      </svg>\n    );\n  }\n\n  private _renderInputElement() {\n    return (\n      <div class=\"c-input-menu__input\" onClick={() => this._showMenu()}>\n        <input\n          aria-controls={'results_' + this._id}\n          aria-readonly=\"true\"\n          aria-haspopup=\"listbox\"\n          id={this._inputId}\n          ref={(el) => (this._inputElement = el as HTMLInputElement)}\n          autocomplete=\"off\"\n          class=\"c-input__input\"\n          type=\"text\"\n          value={this._getLabel() ?? null}\n          name={this.name ?? null}\n          readonly=\"true\"\n        />\n      </div>\n    );\n  }\n\n  private _renderMenu(style) {\n    return (\n      <div\n        class={{\n          'c-input-menu__item-wrapper': true,\n          'c-input-menu__item-wrapper--shadow': this.shadow,\n        }}\n      >\n        <ul\n          id={'results_' + this._id}\n          aria-activedescendant={this.activeListItemId}\n          aria-expanded={this.menuVisible.toString()}\n          style={style}\n          title={this.label || this.placeholder}\n          class={\n            this.menuVisible\n              ? 'c-input-menu__items'\n              : 'c-input-menu__items c-input-menu__items--hidden'\n          }\n          role=\"listbox\"\n          ref={(el) => (this._listElement = el as HTMLUListElement)}\n        >\n          {this.items.map((item, index) => this._getListItem(item, index))}\n        </ul>\n      </div>\n    );\n  }\n\n  private _updateStatusText() {\n    // this.statusText = '';\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    this._debounce = window.setTimeout(() => {\n      const ending = !!this.items.length\n        ? ', to navigate use up and down arrows'\n        : '';\n\n      const selection = this.host.shadowRoot.querySelector(\n        'li[aria-selected=\"true\"]',\n      );\n\n      const selectionText = !!selection\n        ? `${selection.innerHTML} ${selection.ariaPosInSet} of ${selection.ariaSetSize} is highlighted`\n        : null;\n\n      this.statusText = `${selectionText || ending}`;\n\n      this._debounce = null;\n    }, 1400);\n  }\n\n  render() {\n    let itemsPerPageStyle = {};\n\n    if (\n      this.itemsPerPage &&\n      this.itemsPerPage > 0 &&\n      this.items.length > this.itemsPerPage\n    ) {\n      itemsPerPageStyle = {\n        'max-height': 48 * this.itemsPerPage + 'px',\n        'overflow-y': 'scroll',\n      };\n    }\n\n    return (\n      <Host\n        ref={(el) => registerClickOutside(this, el, () => this._hideMenu())}\n      >\n        <div\n          id={'announce-' + this._id}\n          class=\"visuallyhidden\"\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n        >\n          {this.statusText}\n        </div>\n\n        <c-input\n          autofocus={this.autofocus}\n          disabled={this.disabled}\n          hide-details={this.hideDetails}\n          hint={this.hint}\n          id={this.hostId}\n          input-id={this._inputId}\n          label={this.label}\n          name={this.name}\n          placeholder={this.placeholder}\n          required={this.required}\n          shadow={this.shadow}\n          valid={this.valid}\n          validate={this.validate}\n          validate-on-blur={this.validateOnBlur}\n          validation={this.validation}\n          value={this.value}\n          variant=\"select\"\n        >\n          <slot name=\"pre\" slot=\"pre\"></slot>\n\n          <div class=\"c-input__content\">\n            {this._renderInputElement()}\n            {this._renderMenu(itemsPerPageStyle)}\n            {this._renderChevron()}\n          </div>\n\n          <slot name=\"post\" slot=\"post\"></slot>\n        </c-input>\n\n        <slot></slot>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}