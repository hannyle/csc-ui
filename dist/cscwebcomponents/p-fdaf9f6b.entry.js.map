{"version":3,"names":["cDataTableCss","CDataTable","this","_debounce","_extraHeaders","_isValidated","_isVisible","itemsPerPageOptions","hideDetails","simple","hideRange","size","onHeaderChange","_getData","onDataChange","onSingleSelectionChange","clearSelections","onLoadingChange","loading","_setIntermediateStatus","async","_selections","_emitChange","componentWillLoad","sortBy","_a","headers","key","sortDirection","_b","initiallyHiddenHeaders","filter","header","hidden","map","hiddenHeaders","Set","componentDidLoad","horizontalScrolling","_rootIntersectionObserver","IntersectionObserver","entry","isIntersecting","_handleResponsiveHeaders","_resizeObserver","ResizeObserver","_handleResize","observe","element","firstCell","_headerKeys","lastCell","length","_firstCellIntersectionObserver","firstCellHidden","threshold","rootMargin","root","_lastCellIntersectionObserver","lastCellHidden","_handleScrollWidth","_tableElement","querySelector","disconnectedCallback","disconnect","_c","_d","_handleHeaderVisibility","rootWidth","x","index","_headers","findIndex","h","dataset","id","position","getBoundingClientRect","isFullyVisible","right","isLastVisibleHeader","Array","from","_headerRefs","keys","at","isPinned","pinned","nextUnpinnedHeader","values","reverse","find","hdr","width","tableWidth","footerWidth","_footerElement","clearTimeout","breakpoints","setTimeout","markedFooterWidth","_isPaginationSimple","pop","displayHeader","includes","headerIndex","indexOf","splice","_addHeaderRef","el","Map","set","Object","data","extraCells","reduce","cells","assign","value","items","row","cell","item","_hiddenData","forEach","cellData","push","_data","_sortData","pagination","itemCount","_validateProps","requestAnimationFrame","_getSelectionValue","selectionProperty","_hasHiddenData","selection","emit","_isIntermediate","_isPageIntermediate","_refresh","externalData","sorted","sort","a","b","valueA","valueB","toLowerCase","localeCompare","hideFooter","slice","startFrom","endTo","parentWidth","_getIndex","realIndex","_getSelectionsForPage","_hasSelectionsOnPage","selectionsInPage","_onHeadingSelection","event","stopPropagation","preventDefault","KeyboardEvent","type","_onPaginationChange","paginate","detail","_onSelection","singleSelection","_onSort","direction","_onToggleAdditionalData","target","tagName","isActive","singleExpansion","_activeRows","__rest","hiddenRow","expand","active","i","_handleKeyUp","forceRender","_renderAdditioanlDataRow","rowIndex","rowData","class","colSpan","_renderHiddenCells","_renderHiddenHeaderChildren","_renderCellData","options","colIndex","component","Tag","tag","injectValue","params","onClick","call","formattedValue","_renderCellChildren","children","child","rest","flatData","obj","_renderExpansionIndicator","tabindex","onKeyUp","height","viewBox","d","mdiChevronDown","_renderLoaderRow","_renderRows","selectionValue","isSelected","Fragment","parent","selected","_renderSelectionCell","_renderTableCells","selectable","onChangeValue","_renderSortIndicator","iconPath","mdiSwapVertical","mdiArrowUpThin","mdiArrowDownThin","_renderStatusTextRow","loadingText","noDataText","_renderTableBody","_renderTableCell","isHidden","align","justify","_sortCellProperties","_renderTableFooter","footerStyles","maxWidth","left","ref","style","footerOptions","e","_renderTableHeader","indicatorRowStyles","sticky","stickyHeader","intermediate","isSortable","sortable","minWidth","outlined","_scrollLeft","path","mdiChevronLeft","_scrollRight","mdiChevronRight","leftBorder","hiddenHeaderKeys","headerCellLeftBorder","scrollIntoView","behavior","block","inline","rightBorder","headerCellRightBorder","entries","keyA","keyB","console","warn","render","tableClasses","Host"],"sources":["./src/components/c-data-table/c-data-table.scss?tag=c-data-table&encapsulation=shadow","./src/components/c-data-table/c-data-table.tsx"],"sourcesContent":[":host {\n  display: block;\n  position: relative;\n  width: 100%;\n}\n\n:host([horizontal-scrolling]) {\n  overflow-x: scroll;\n}\n\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd {\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  margin: 0;\n  padding: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n.c-data-table {\n  box-shadow: inset 0 0 0 1px var(--csc-light-grey);\n  width: 100%;\n\n  .children {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    width: 100%;\n\n    pre {\n      font-family: inherit;\n      white-space: pre-wrap;\n    }\n  }\n\n  [data-justify='end'],\n  [data-align='end'] .children {\n    align-items: flex-end;\n  }\n\n  [data-justify='start'],\n  [data-align='start'] .children {\n    align-items: flex-start;\n  }\n\n  [data-justify='center'],\n  [data-align='center'] .children {\n    align-items: center;\n  }\n\n  [data-align='end'],\n  [data-justify='end'] .children {\n    justify-content: flex-end;\n  }\n\n  [data-align='start'],\n  [data-justify='start'] .children {\n    justify-content: flex-start;\n  }\n\n  [data-align='center'],\n  [data-justify='center'] .children {\n    justify-content: center;\n  }\n\n  th,\n  td {\n    font-weight: 400;\n\n    > div {\n      align-items: center;\n      box-sizing: border-box;\n      display: flex;\n      line-height: 1;\n      padding: 12px;\n      width: 100%;\n    }\n  }\n\n  th {\n    font-size: 14px;\n    padding: 4px;\n\n    &.selection {\n      width: 56px;\n    }\n\n    &.indicator {\n      width: 46px;\n    }\n\n    > div {\n      border-radius: 4px;\n      flex-wrap: nowrap;\n      gap: 8px;\n      height: 48px;\n      white-space: nowrap;\n\n      &.sortable:hover {\n        background-color: var(--csc-primary-text-hover);\n        color: var(--csc-primary);\n        cursor: pointer;\n\n        svg {\n          fill: var(--csc-primary);\n        }\n      }\n\n      &.selection {\n        &--heading {\n          padding-left: 8px;\n          padding-right: 0;\n          margin-right: -8px;\n        }\n      }\n    }\n  }\n\n  td {\n    font-size: 16px;\n\n    > div {\n      align-items: flex-start;\n      flex-direction: column;\n      gap: 8px;\n      justify-content: center;\n      min-height: 56px;\n      padding: 12px;\n\n      &.selection {\n        margin-right: -4px;\n        padding: 7px 0 7px 12px;\n      }\n\n      c-tag {\n        --c-tag-margin: 0px;\n      }\n    }\n\n    &.loader {\n      background-color: var(--csc-light-grey);\n      height: 2px;\n      position: relative;\n\n      > div {\n        height: 2px;\n        min-height: auto;\n        padding: 0;\n      }\n    }\n\n    &.info {\n      > div {\n        height: 108px;\n        justify-content: center;\n      }\n    }\n\n    svg {\n      transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n    }\n  }\n\n  thead {\n    background-color: #fff;\n    position: relative;\n\n    &.sticky {\n      box-shadow: 0 2px 0 0 var(--csc-light-grey);\n      position: sticky;\n      top: 0;\n      z-index: 3;\n    }\n\n    .c-data-table__header-indicators {\n      pointer-events: none;\n\n      th {\n        > div {\n          margin-top: -56px;\n          display: flex;\n          justify-items: space-between;\n        }\n      }\n\n      c-icon-button {\n        background-color: rgba(255, 255, 255, 0.75);\n        border-radius: 50%;\n        pointer-events: all;\n      }\n    }\n  }\n\n  tfoot {\n    background-color: #fff;\n\n    tr {\n      box-shadow: inset 0 1px 0 0 var(--csc-light-grey);\n    }\n\n    td {\n      > div {\n        align-items: center;\n        flex-direction: row;\n        justify-content: flex-start;\n        min-height: 48px;\n      }\n\n      c-pagination {\n        flex: 1;\n      }\n    }\n  }\n\n  tbody {\n    /* Safari box shadow replacement */\n    @supports (-webkit-hyphens: none) {\n      tr {\n        border-bottom: 1px solid var(--csc-light-grey);\n      }\n    }\n\n    tr {\n      box-shadow: inset 0 1px 0 0 var(--csc-light-grey);\n\n      &.actions {\n        box-shadow: none;\n\n        td > div {\n          background-color: rgba(0, 0, 0, 0.015);\n          height: auto;\n        }\n      }\n\n      &.active {\n        box-shadow: inset 2px 0 0 var(--csc-primary),\n          inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        border-radius: 6px 6px 0 0;\n\n        svg {\n          transform: rotate(180deg);\n        }\n\n        + .additional-data {\n          border-radius: 0 0 6px 6px;\n          box-shadow: inset 2px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 -2px 0 var(--csc-primary);\n        }\n\n        &.selected {\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        }\n      }\n\n      &.selected {\n        background-color: rgba($csc-primary, 0.05);\n        box-shadow: inset 4px 0 0 var(--csc-primary),\n          inset 0 1px 0 0 var(--csc-light-grey);\n\n        + .additional-data {\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 -2px 0 var(--csc-primary);\n        }\n      }\n    }\n  }\n\n  &__loader {\n    background-color: var(--csc-light-grey);\n    height: 2px;\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n  }\n\n  .loading-bar {\n    animation: loading 1s ease-in 0.5s infinite;\n    background-color: var(--csc-primary);\n    height: 100%;\n    left: -50%;\n    position: absolute;\n    width: 50%;\n  }\n\n  @keyframes loading {\n    0% {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(400%);\n    }\n  }\n\n  .additional-data {\n    display: none;\n\n    &.active {\n      display: table-row;\n    }\n\n    ul {\n      list-style: none;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n\n      li {\n        padding: 12px;\n\n        &:not(:last-child) {\n          box-shadow: inset 0 -1px 0 0 var(--csc-light-grey);\n        }\n\n        span {\n          color: var(--csc-primary);\n          font-weight: 600;\n        }\n\n        .title {\n          display: flex;\n          gap: 8px;\n\n          + .children {\n            margin-top: 8px;\n          }\n        }\n      }\n    }\n  }\n\n  &--scrollable {\n    position: relative;\n  }\n\n  &--hoverable {\n    tbody {\n      tr:not(.additional-data) {\n        cursor: pointer;\n\n        &:hover {\n          background-color: var(--csc-primary-text-hover);\n          border-radius: 6px;\n          box-shadow: inset 0 0 0 2px var(--csc-primary);\n          overflow: hidden;\n        }\n\n        &.active:hover {\n          border-radius: 6px 6px 0 0;\n          box-shadow: inset 2px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        }\n\n        &.selected.active:hover {\n          border-radius: 6px 6px 0 0;\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset -2px 0 0 var(--csc-primary), inset 0 2px 0 var(--csc-primary);\n        }\n\n        &.selected:hover {\n          border-radius: 6px;\n          box-shadow: inset 4px 0 0 var(--csc-primary),\n            inset 0 0 0 2px var(--csc-primary);\n        }\n      }\n    }\n  }\n}\n\n.sorted-column {\n  background-color: rgb(0 103 120 / 5%);\n}\n","import {\n  mdiArrowDownThin,\n  mdiArrowUpThin,\n  mdiSwapVertical,\n  mdiChevronDown,\n  mdiChevronLeft,\n  mdiChevronRight,\n} from '@mdi/js';\nimport {\n  Component,\n  Host,\n  h,\n  Element,\n  Event,\n  EventEmitter,\n  Prop,\n  State,\n  Fragment,\n  Watch,\n  Method,\n} from '@stencil/core';\nimport {\n  CDataTableData,\n  CDataTableDataItem,\n  CDataTableFooterOptions,\n  CDataTableHeader,\n  CPaginationOptions,\n} from '../../types';\n\ninterface CDataTableDataItemPrivate extends Omit<CDataTableDataItem, 'value'> {\n  _hiddenData?: {\n    id?: string;\n    key?: string;\n    value?: CDataTableDataItem;\n  }[];\n}\n\ntype HeaderRefs = Map<string, HTMLElement>;\n\n/**\n * @group Tables\n */\n@Component({\n  tag: 'c-data-table',\n  styleUrl: 'c-data-table.scss',\n  shadow: true,\n})\nexport class CDataTable {\n  @Element() element: HTMLCDataTableElement;\n\n  /**\n   * Data of the table\n   */\n  @Prop() data: CDataTableData[] = [];\n\n  /**\n   * Externally sorted and paginated data\n   */\n  @Prop() externalData = false;\n\n  /**\n   * Headers of the table\n   */\n  @Prop() headers: CDataTableHeader[] = [];\n\n  /**\n   * Hide the footer\n   */\n  @Prop() hideFooter = false;\n\n  /**\n   * Items per page options\n   */\n  @Prop() footerOptions: CDataTableFooterOptions = {\n    itemsPerPageOptions: [5, 25, 50, 100],\n    hideDetails: false,\n    simple: false,\n    hideRange: false,\n    size: 'default',\n  };\n\n  /**\n   * Show a loader on top of the table\n   */\n  @Prop() loading = false;\n\n  /**\n   * Text shown when there is no data and the table is loading\n   */\n  @Prop() loadingText = 'Loading data';\n\n  /**\n   * Text shown when there are no data available\n   */\n  @Prop() noDataText = 'No data';\n\n  /**\n   * Pagination options\n   */\n  @Prop({ mutable: true }) pagination: CPaginationOptions;\n\n  /**\n   * Make rows selectable\n   */\n  @Prop() selectable = false;\n\n  /**\n   * Select only a single row at a time\n   */\n  @Prop() singleSelection = false;\n\n  /**\n   * Property used in selections\n   */\n  @Prop() selectionProperty: string = null;\n\n  /**\n   * Allow only a single row expanded at a time\n   */\n  @Prop() singleExpansion = false;\n\n  /**\n   * Sort data by\n   */\n  @Prop() sortBy = null;\n\n  /**\n   * Sorting direction\n   */\n  @Prop() sortDirection: 'asc' | 'desc' | null = null;\n\n  /**\n   * Use sticky header\n   */\n  @Prop() stickyHeader = false;\n\n  /**\n   * Use horizontal scrolling\n   */\n  @Prop() horizontalScrolling = false;\n\n  /**\n   * Triggered on pagination\n   */\n  @Event() paginate: EventEmitter<CPaginationOptions>;\n\n  /**\n   * Triggered on row expansion\n   */\n  @Event() expand: EventEmitter;\n\n  /**\n   * Triggered on sort\n   */\n  @Event() sort: EventEmitter;\n\n  /**\n   * Triggered on selection\n   */\n  @Event() selection: EventEmitter;\n\n  @State() _activeRows: (number | string)[] = [];\n\n  @State() _data: CDataTableDataItemPrivate[] = [];\n\n  @State() _isIntermediate = false;\n\n  @State() _isPaginationSimple = false;\n\n  @State() _selections: (string | number)[] = [];\n\n  @State() hasOverflow = false;\n\n  @State() hiddenHeaders: string[] = [];\n\n  @State() initiallyHiddenHeaders: string[] = [];\n\n  @State() forceRender = false;\n\n  @State() breakpoints: number[] = [];\n\n  @State() markedFooterWidth = 0;\n\n  @State() parentWidth = 0;\n\n  @State() firstCellHidden = false;\n\n  @State() lastCellHidden = false;\n\n  private _debounce = null;\n\n  private _extraHeaders: CDataTableHeader[] = [];\n\n  private _rootIntersectionObserver: IntersectionObserver;\n\n  private _firstCellIntersectionObserver: IntersectionObserver;\n\n  private _lastCellIntersectionObserver: IntersectionObserver;\n\n  private _resizeObserver: ResizeObserver;\n\n  private _tableElement: HTMLTableElement;\n\n  private _footerElement: HTMLTableRowElement;\n\n  private _headerRefs: HeaderRefs;\n\n  private _isValidated = false;\n\n  private _isVisible = false;\n\n  @Watch('hiddenHeaders')\n  onHeaderChange() {\n    this._getData();\n  }\n\n  @Watch('data')\n  onDataChange() {\n    this._getData();\n  }\n\n  @Watch('singleSelection')\n  onSingleSelectionChange() {\n    this.clearSelections();\n  }\n\n  @Watch('loading')\n  onLoadingChange(loading: boolean) {\n    if (!loading) {\n      this._setIntermediateStatus();\n    }\n  }\n\n  /**\n   * Clear selections externally\n   */\n  @Method()\n  async clearSelections() {\n    this._selections = [];\n    this._emitChange();\n  }\n\n  componentWillLoad() {\n    this.sortBy = this.sortBy ?? this.headers[0].key;\n    this.sortDirection = this.sortDirection ?? 'asc';\n    this._getData();\n\n    this.initiallyHiddenHeaders = this.headers\n      .filter((header) => !!header.hidden)\n      .map((header) => header.key);\n\n    // Hide the initially hidden headers\n    this.hiddenHeaders = [\n      ...new Set([...this.hiddenHeaders, ...this.initiallyHiddenHeaders]),\n    ];\n  }\n\n  componentDidLoad() {\n    if (!this.horizontalScrolling) {\n      this._rootIntersectionObserver = new IntersectionObserver(([entry]) => {\n        if (entry.isIntersecting) {\n          this._handleResponsiveHeaders();\n\n          this._isVisible = true;\n        }\n      });\n\n      this._resizeObserver = new ResizeObserver(() => {\n        this._handleResize();\n      });\n\n      this._rootIntersectionObserver.observe(this.element);\n    } else {\n      const [firstCell] = this._headerKeys;\n      const lastCell = this._headerKeys[this._headerKeys.length - 1];\n\n      this._firstCellIntersectionObserver = new IntersectionObserver(\n        ([entry]) => {\n          this.firstCellHidden = !entry.isIntersecting;\n        },\n        { threshold: 1, rootMargin: '16px', root: this.element },\n      );\n\n      this._lastCellIntersectionObserver = new IntersectionObserver(\n        ([entry]) => {\n          this.lastCellHidden = !entry.isIntersecting;\n        },\n        { threshold: 1, rootMargin: '16px', root: this.element },\n      );\n\n      this._resizeObserver = new ResizeObserver(() => {\n        this._handleScrollWidth();\n      });\n\n      this._firstCellIntersectionObserver.observe(\n        this._tableElement.querySelector(`[data-id=\"${firstCell}\"]`),\n      );\n\n      this._lastCellIntersectionObserver.observe(\n        this._tableElement.querySelector(`[data-id=\"${lastCell}\"]`),\n      );\n    }\n\n    this._resizeObserver.observe(this.element);\n  }\n\n  disconnectedCallback() {\n    this._resizeObserver?.disconnect();\n    this._rootIntersectionObserver?.disconnect();\n    this._firstCellIntersectionObserver?.disconnect();\n    this._lastCellIntersectionObserver?.disconnect();\n  }\n\n  private _handleHeaderVisibility(\n    header: HTMLElement,\n    rootWidth: number,\n    x: number,\n  ) {\n    const index = this._headers.findIndex((h) => h.key === header.dataset.id);\n    const position = header.getBoundingClientRect();\n    const isFullyVisible = position.right - x <= rootWidth;\n    const isLastVisibleHeader =\n      header.dataset.id === Array.from(this._headerRefs.keys()).at(0);\n    const isPinned = this._headers[index]?.pinned;\n\n    if (!isFullyVisible && isPinned && index >= 1) {\n      const nextUnpinnedHeader = Array.from(this._headerRefs.values())\n        .reverse()\n        .find((hdr) => {\n          if (!hdr) return false;\n\n          return !this._headers.find((h) => h.key === hdr.dataset.id)?.pinned;\n        });\n\n      this.hiddenHeaders = [\n        ...new Set([\n          ...this.initiallyHiddenHeaders,\n          ...this.hiddenHeaders,\n          (nextUnpinnedHeader || header).dataset.id, // hide the pinned header as a last resort\n        ]),\n      ];\n\n      return;\n    }\n\n    if (!isFullyVisible && !isLastVisibleHeader) {\n      this.hiddenHeaders = [\n        ...new Set([\n          ...this.initiallyHiddenHeaders,\n          ...this.hiddenHeaders,\n          header.dataset.id,\n        ]),\n      ];\n    }\n  }\n\n  private _handleResponsiveHeaders() {\n    const { width: tableWidth } = this._tableElement.getBoundingClientRect();\n    const { width: rootWidth, x } = this.element.getBoundingClientRect();\n    const footerWidth =\n      this._footerElement?.getBoundingClientRect()?.width || 0;\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    if (rootWidth < tableWidth) {\n      this.breakpoints = [...new Set([...this.breakpoints, tableWidth])];\n\n      setTimeout(() => {\n        for (const header of this._headerRefs.values()) {\n          if (header) {\n            this._handleHeaderVisibility(header, rootWidth, x);\n          }\n        }\n\n        this._debounce = setTimeout(() => {\n          if (rootWidth < footerWidth) {\n            this.markedFooterWidth = footerWidth;\n            this._isPaginationSimple = true;\n          }\n        }, 200);\n      }, 0);\n    } else if (\n      this.breakpoints.length > 0 &&\n      tableWidth >= this.breakpoints[this.breakpoints.length - 1]\n    ) {\n      this.breakpoints.pop();\n      // Header that can be unhided from current hiddenHeaders\n      const displayHeader = this.headers.find((header) =>\n        this.hiddenHeaders.includes(header.key),\n      );\n\n      if (!!displayHeader) {\n        const headerIndex = this.hiddenHeaders.indexOf(displayHeader.key);\n        this.hiddenHeaders.splice(headerIndex, 1);\n        this.hiddenHeaders = [\n          ...new Set([...this.hiddenHeaders, ...this.initiallyHiddenHeaders]),\n        ];\n      }\n    }\n\n    this._debounce = setTimeout(() => {\n      if (rootWidth >= this.markedFooterWidth && this.markedFooterWidth > 0) {\n        this._isPaginationSimple = false;\n      }\n    }, 200);\n  }\n\n  private _addHeaderRef(key: string, el: HTMLElement) {\n    if (!this._headerRefs) {\n      this._headerRefs = new Map([[key, el]]);\n\n      return;\n    }\n\n    this._headerRefs.set(key, el);\n  }\n\n  private _getData() {\n    this._extraHeaders = this.headers.filter(\n      (header) => !Object.keys(this.data?.[0] || {}).includes(header.key),\n    );\n\n    // create cells for headers not present in the data\n    const extraCells = this._extraHeaders.reduce(\n      (cells, header) => ({\n        ...cells,\n        [header.key]: {\n          value: null,\n        },\n      }),\n      {},\n    );\n\n    const items = this.data\n      .map((row) => ({\n        ...row,\n        ...extraCells,\n      }))\n      .reduce<CDataTableDataItemPrivate[]>((data, cell) => {\n        const item: CDataTableDataItemPrivate = {\n          _hiddenData: [],\n        };\n\n        Object.keys(cell).forEach((key) => {\n          item[key] = cell[key];\n        });\n\n        this.hiddenHeaders.forEach((header) => {\n          const cellData = this.headers.find((h) => h.key === header);\n\n          item._hiddenData.push({\n            id: cellData?.key,\n            key: cellData?.value,\n            value: cell[header],\n          });\n        });\n\n        data.push(item);\n\n        return data;\n      }, []);\n\n    this._data = this._sortData(items);\n\n    this.pagination = { ...this.pagination, itemCount: this.data.length };\n\n    this._validateProps(this._data[0]);\n\n    this._handleScrollWidth();\n\n    requestAnimationFrame(() => {\n      this._handleResize();\n    });\n  }\n\n  private _getSelectionValue(\n    row: CDataTableDataItemPrivate,\n    index: number,\n  ): string | number {\n    return !!this.selectionProperty\n      ? row[this.selectionProperty]?.value || index\n      : index;\n  }\n\n  private get _headers() {\n    return this.headers\n      .map((header) => ({\n        ...header,\n        pinned: !!header.pinned,\n      }))\n      .filter(\n        (header) => !this.hiddenHeaders.includes(header.key) && !header.hidden,\n      );\n  }\n\n  private get _headerKeys() {\n    return this._headers.map((header) => header.key);\n  }\n\n  private get _hasHiddenData() {\n    return !!this.hiddenHeaders.length;\n  }\n\n  private _emitChange() {\n    this.selection.emit(this._selections);\n  }\n\n  private _setIntermediateStatus() {\n    requestAnimationFrame(() => {\n      this._isIntermediate = this._isPageIntermediate();\n      this._refresh();\n    });\n  }\n\n  private _sortData(\n    data: CDataTableDataItem[] | CDataTableDataItemPrivate[],\n  ): CDataTableDataItemPrivate[] {\n    if (!this.sortBy || this.externalData) return data;\n\n    const sorted = data.sort((a, b) => {\n      const valueA = a[this.sortBy].value;\n      const valueB = b[this.sortBy].value;\n\n      if (typeof valueA === 'string') {\n        if (this.sortDirection === 'asc') {\n          return valueA.toLowerCase().localeCompare(valueB.toLowerCase());\n        }\n\n        return valueB.toLowerCase().localeCompare(valueA.toLowerCase());\n      }\n\n      if (typeof valueA === 'number') {\n        if (this.sortDirection === 'asc') {\n          return valueA - valueB;\n        }\n\n        return valueB - valueA;\n      }\n    });\n\n    return !!this.pagination && !this.hideFooter\n      ? sorted.slice(this.pagination.startFrom, this.pagination.endTo + 1)\n      : sorted;\n  }\n\n  private _handleScrollWidth() {\n    this.parentWidth = this.element.getBoundingClientRect().width;\n  }\n\n  private _handleResize() {\n    if (this._isVisible) {\n      this._handleResponsiveHeaders();\n    }\n  }\n\n  private _getIndex(index: number) {\n    let realIndex = index;\n\n    if (\n      !this.selectionProperty &&\n      !!this.pagination &&\n      typeof realIndex === 'number'\n    ) {\n      realIndex += this.pagination.startFrom;\n\n      if (this.sortDirection === 'desc') {\n        realIndex = this.pagination.itemCount - 1 - realIndex;\n      }\n    }\n\n    return realIndex;\n  }\n\n  private _getSelectionsForPage() {\n    return this._selections.filter((selection) =>\n      this._data\n        .map((row, index) =>\n          this._getSelectionValue(row, this._getIndex(index)),\n        )\n        .includes(selection),\n    );\n  }\n\n  private _hasSelectionsOnPage() {\n    return this._getSelectionsForPage().length > 0;\n  }\n\n  private _isPageIntermediate() {\n    const selectionsInPage = this._getSelectionsForPage();\n\n    return (\n      this._hasSelectionsOnPage() && selectionsInPage.length < this._data.length\n    );\n  }\n\n  private _onHeadingSelection(event: KeyboardEvent | MouseEvent) {\n    event?.stopPropagation();\n    event?.preventDefault();\n\n    if (\n      event instanceof KeyboardEvent &&\n      event.type === 'keyup' &&\n      event.key !== ' '\n    ) {\n      return;\n    }\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    this._debounce = setTimeout(() => {\n      if (this._data.length === this._getSelectionsForPage().length) {\n        this._selections = [\n          ...this._selections.filter(\n            (selection) =>\n              !this._data\n                .map((row, index) =>\n                  this._getSelectionValue(row, this._getIndex(index)),\n                )\n                .includes(selection),\n          ),\n        ];\n\n        this._setIntermediateStatus();\n        this._emitChange();\n\n        this._tableElement;\n\n        return;\n      }\n\n      this._selections = [\n        ...new Set([\n          ...this._selections,\n          ...this._data.map((row, index) =>\n            this._getSelectionValue(row, this._getIndex(index)),\n          ),\n        ]),\n      ];\n\n      this._setIntermediateStatus();\n      this._emitChange();\n    }, 200);\n  }\n\n  private _onPaginationChange(event: CustomEvent) {\n    if (this.externalData) {\n      this.paginate.emit(event.detail);\n\n      return;\n    }\n\n    this.pagination = {\n      ...this.pagination,\n      ...event.detail,\n    };\n\n    this._setIntermediateStatus();\n\n    this._getData();\n  }\n\n  private _onSelection(value: string | number) {\n    if (this.singleSelection) {\n      this._selections = [value];\n\n      this._emitChange();\n      this._refresh();\n\n      return;\n    }\n\n    if (this._selections.includes(value)) {\n      this._selections = this._selections.filter(\n        (selection) => selection !== value,\n      );\n    } else {\n      this._selections = [...this._selections, value];\n    }\n\n    this._emitChange();\n\n    this._setIntermediateStatus();\n  }\n\n  private _onSort(key: string) {\n    if (this.sortBy === key) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortDirection = 'asc';\n    }\n\n    this.sortBy = key;\n\n    this.sort.emit({ sortBy: this.sortBy, direction: this.sortDirection });\n\n    this._getData();\n\n    this._setIntermediateStatus();\n    this._refresh();\n  }\n\n  private _onToggleAdditionalData(\n    event: KeyboardEvent | MouseEvent,\n    value: string | number,\n    row,\n  ) {\n    if (\n      !this._hasHiddenData ||\n      (event.target as HTMLElement).tagName === 'C-CHECKBOX'\n    )\n      return;\n\n    const isActive = this.singleExpansion\n      ? this._activeRows[0] === value\n      : this._activeRows.includes(value);\n\n    const { _hiddenData, ...data } = row;\n\n    Object.keys(data).forEach((key) => {\n      data[key] = data[key].value;\n    });\n\n    _hiddenData.forEach((hiddenRow) => {\n      data[hiddenRow.id] = hiddenRow.value.value;\n    });\n\n    this.expand.emit({\n      active: !isActive,\n      row: data,\n    });\n\n    if (this.singleExpansion) {\n      this._activeRows = isActive ? [] : [value];\n\n      return;\n    }\n\n    if (isActive) {\n      this._activeRows = this._activeRows.filter((i) => i !== value);\n\n      return;\n    }\n\n    this._activeRows = [...this._activeRows, value];\n  }\n\n  private _handleKeyUp(event: KeyboardEvent, value: string | number, row) {\n    event.preventDefault();\n\n    if (event.key === 'Enter') {\n      this._onToggleAdditionalData(event, value, row);\n    }\n  }\n\n  private _refresh() {\n    this.forceRender = !this.forceRender;\n  }\n\n  private _renderAdditioanlDataRow(rowIndex: number, rowData = {}) {\n    return (\n      this._hasHiddenData && (\n        <tr\n          class={{\n            'additional-data': true,\n            active: this._activeRows.includes(rowIndex),\n          }}\n        >\n          <td colSpan={100}>\n            <div>\n              <ul>\n                {this._renderHiddenCells(rowIndex)}\n                {this._renderHiddenHeaderChildren(rowIndex, rowData)}\n              </ul>\n            </div>\n          </td>\n        </tr>\n      )\n    );\n  }\n\n  private _renderCellData(\n    key: string,\n    options: CDataTableDataItem,\n    colIndex: number,\n    rowIndex: number,\n  ) {\n    const component = options.component || this._headers[colIndex]?.component;\n    const Tag = component?.tag || null;\n    const injectValue = !!component?.injectValue;\n    const params = component?.params || {};\n\n    if (injectValue) {\n      params.value = options.value;\n    }\n\n    return !!Tag ? (\n      <Tag\n        {...params}\n        onClick={(event: MouseEvent) => {\n          params?.onClick?.({\n            index: rowIndex,\n            value: options.value,\n            data: this.data[rowIndex],\n            event,\n            key,\n          });\n        }}\n      >\n        {options.formattedValue || options.value}\n      </Tag>\n    ) : (\n      options.formattedValue || options.value\n    );\n  }\n\n  private _renderCellChildren(\n    options: CDataTableDataItem | CDataTableHeader,\n    index: number,\n    key: string,\n    data: CDataTableDataItemPrivate,\n  ) {\n    return options.children.map((child) => {\n      const Tag = child.component?.tag;\n      const params = child.component?.params || {};\n\n      const { _hiddenData = [], ...rest } = data;\n\n      const flatData: CDataTableData = {\n        ...(rest as Partial<CDataTableData>),\n        ..._hiddenData.reduce((obj, row) => {\n          obj[row.id] = row.value;\n\n          return obj;\n        }, {} as CDataTableData),\n      };\n\n      return !!Tag ? (\n        <Tag\n          {...params}\n          onClick={(event: MouseEvent) => {\n            params?.onClick?.({\n              value: options.value,\n              index,\n              event,\n              key,\n              data: flatData,\n            });\n          }}\n        >\n          {child.value}\n        </Tag>\n      ) : (\n        child.value\n      );\n    });\n  }\n\n  private _renderExpansionIndicator(rowIndex: number, rowData = {}) {\n    return (\n      this._hasHiddenData && (\n        <td>\n          <div\n            tabindex=\"0\"\n            onKeyUp={(event: KeyboardEvent) =>\n              this._handleKeyUp(event, rowIndex, rowData)\n            }\n          >\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\">\n              <path d={mdiChevronDown} />\n            </svg>\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderHiddenCells(index) {\n    return this._data[index]._hiddenData\n      .filter((d) => !this._extraHeaders.find((h) => h.key === d.id))\n      .map(({ id, key, value: options }) => {\n        const index = this._headers.findIndex((h) => h.key === id);\n\n        return (\n          <li>\n            {!!key && (\n              <div class=\"title\">\n                <span>{key}:</span>\n                {this._renderCellData(id, options, index, index)}\n              </div>\n            )}\n\n            {!!options.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(options, index, id, {})}\n              </div>\n            )}\n          </li>\n        );\n      });\n  }\n\n  private _renderHiddenHeaderChildren(index, rowData) {\n    return this._data[index]._hiddenData.map(({ id, key }) => {\n      const headerIndex = this.headers.findIndex((h) => h.key === id);\n\n      return (\n        !!this.headers[headerIndex]?.children && (\n          <li>\n            <div class=\"children\">\n              {this._renderCellChildren(\n                this.headers[headerIndex],\n                index,\n                key,\n                rowData,\n              )}\n            </div>\n          </li>\n        )\n      );\n    });\n  }\n\n  private _renderLoaderRow() {\n    return (\n      <tr>\n        <td class=\"loader\" colSpan={100}>\n          {this.loading && (\n            <div class=\"c-data-table__loader\">\n              <div class=\"loading-bar\" />\n            </div>\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  private _renderRows() {\n    return (\n      !!this._data.length &&\n      Object.values(this._data).map((rowData, rowIndex) => {\n        let selectionValue = this._getSelectionValue(rowData, rowIndex);\n\n        if (!this.selectionProperty && typeof selectionValue === 'number') {\n          selectionValue = this._getIndex(selectionValue);\n        }\n\n        const isSelected = !!this._selections.includes(selectionValue);\n\n        return (\n          <Fragment>\n            <tr\n              class={{\n                active: this._activeRows.includes(rowIndex),\n                parent: this._hasHiddenData,\n                selected: isSelected,\n              }}\n              onClick={(event) =>\n                this._onToggleAdditionalData(event, rowIndex, rowData)\n              }\n            >\n              {this._renderSelectionCell(isSelected, selectionValue)}\n              {this._renderExpansionIndicator(rowIndex, rowData)}\n              {this._renderTableCells(rowIndex, rowData)}\n            </tr>\n\n            {this._renderAdditioanlDataRow(rowIndex, rowData)}\n          </Fragment>\n        );\n      })\n    );\n  }\n\n  private _renderSelectionCell(\n    isSelected: boolean,\n    selectionValue: string | number,\n  ) {\n    return (\n      this.selectable && (\n        <td>\n          <div class=\"selection\">\n            <c-checkbox\n              value={isSelected}\n              hide-details\n              onChangeValue={() => this._onSelection(selectionValue)}\n            ></c-checkbox>\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderSortIndicator(key: string) {\n    let iconPath = mdiSwapVertical;\n\n    if (key === this.sortBy && this.sortDirection === 'asc') {\n      iconPath = mdiArrowUpThin;\n    }\n\n    if (key === this.sortBy && this.sortDirection === 'desc') {\n      iconPath = mdiArrowDownThin;\n    }\n\n    return (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" tabindex={0}>\n        <path d={iconPath} />\n      </svg>\n    );\n  }\n\n  private _renderStatusTextRow() {\n    return (\n      !this._data.length && (\n        <tr>\n          <td class=\"info\" colSpan={100}>\n            <div>{this.loading ? this.loadingText : this.noDataText}</div>\n          </td>\n        </tr>\n      )\n    );\n  }\n\n  private _renderTableBody() {\n    return (\n      <tbody>\n        {this._renderLoaderRow()}\n        {this._renderStatusTextRow()}\n        {this._renderRows()}\n      </tbody>\n    );\n  }\n\n  private _renderTableCell(\n    key: string,\n    options: CDataTableDataItem,\n    colIndex: number,\n    rowIndex: number,\n    rowData = {},\n  ) {\n    const header = this.headers.find((header) => header.key === key);\n    const isHidden = this.hiddenHeaders.includes(key);\n\n    // Render only if key is present in headers\n    return (\n      !!header &&\n      !isHidden && (\n        <td>\n          <div data-align={header?.align} data-justify={header?.justify}>\n            {this._renderCellData(key, options, colIndex, rowIndex)}\n\n            {!!options.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(options, rowIndex, key, rowData)}\n              </div>\n            )}\n\n            {!!this.headers.find((header) => header.key === key)?.children && (\n              <div class=\"children\">\n                {this._renderCellChildren(\n                  this.headers.find((header) => header.key === key),\n                  rowIndex,\n                  key,\n                  rowData,\n                )}\n              </div>\n            )}\n          </div>\n        </td>\n      )\n    );\n  }\n\n  private _renderTableCells(rowIndex: number, rowData = {}) {\n    return this._sortCellProperties(rowData).map(([key, options], index) =>\n      this._renderTableCell(key, options, index, rowIndex, rowData),\n    );\n  }\n\n  private _renderTableFooter() {\n    const footerStyles = this.horizontalScrolling\n      ? {\n          maxWidth: `${this.parentWidth}px`,\n          position: 'sticky',\n          left: '0',\n        }\n      : {};\n\n    return (\n      !!this.pagination && (\n        <tfoot>\n          <tr ref={(el) => (this._footerElement = el as HTMLTableRowElement)}>\n            <td colSpan={100}>\n              <div class=\"c-data-table__footer\" style={footerStyles}>\n                <c-pagination\n                  {...this.footerOptions}\n                  value={this.pagination}\n                  simple={this._isPaginationSimple}\n                  onChangeValue={(e) => this._onPaginationChange(e)}\n                ></c-pagination>\n              </div>\n            </td>\n          </tr>\n        </tfoot>\n      )\n    );\n  }\n\n  private _renderTableHeader() {\n    const indicatorRowStyles = this.horizontalScrolling\n      ? {\n          width: `${this.parentWidth - 8}px`,\n          position: 'sticky',\n          left: '4px',\n        }\n      : {};\n\n    return (\n      <thead class={{ sticky: this.stickyHeader }}>\n        <tr>\n          {this.selectable && (\n            <th class=\"selection\">\n              {!this.singleSelection && (\n                <div class=\"selection--heading\">\n                  <c-checkbox\n                    value={this._hasSelectionsOnPage()}\n                    intermediate={this._isIntermediate}\n                    hide-details\n                    onClick={(event: MouseEvent) =>\n                      this._onHeadingSelection(event)\n                    }\n                    onKeyUp={(event: KeyboardEvent) =>\n                      this._onHeadingSelection(event)\n                    }\n                  ></c-checkbox>\n                </div>\n              )}\n            </th>\n          )}\n\n          {this._hasHiddenData && <th class=\"indicator\"></th>}\n\n          {!!this._headers.length &&\n            this._headers.map((header) => {\n              const isSortable =\n                !!header.sortable || typeof header.sortable === 'undefined';\n              const params = {\n                'data-id': header.key,\n                ref: (el) => this._addHeaderRef(header.key, el),\n                ...(!!header && {\n                  style: {\n                    ...(header.width && { minWidth: header.width }),\n                  },\n                }),\n                ...(isSortable && {\n                  onClick: () => this._onSort(header.key),\n                  onKeyUp: () => this._onSort(header.key),\n                }),\n              };\n\n              return (\n                <th {...params}>\n                  <div class={{ sortable: isSortable }}>\n                    {header.value}\n                    {isSortable && this._renderSortIndicator(header.key)}\n                  </div>\n                </th>\n              );\n            })}\n        </tr>\n\n        {this.horizontalScrolling && (\n          <tr class=\"c-data-table__header-indicators\">\n            <th colSpan={100}>\n              <div style={indicatorRowStyles}>\n                {this.firstCellHidden && (\n                  <c-icon-button\n                    class=\"first\"\n                    size=\"small\"\n                    outlined\n                    onClick={() => this._scrollLeft()}\n                  >\n                    <c-icon path={mdiChevronLeft}></c-icon>\n                  </c-icon-button>\n                )}\n\n                <c-spacer />\n\n                {this.lastCellHidden && (\n                  <c-icon-button\n                    class=\"last\"\n                    size=\"small\"\n                    outlined\n                    onClick={() => this._scrollRight()}\n                  >\n                    <c-icon path={mdiChevronRight}></c-icon>\n                  </c-icon-button>\n                )}\n              </div>\n            </th>\n          </tr>\n        )}\n      </thead>\n    );\n  }\n\n  private _scrollLeft() {\n    const leftBorder = this.element.getBoundingClientRect().left;\n\n    const hiddenHeaderKeys = this._headerKeys.filter((key) => {\n      const headerCellLeftBorder = this._tableElement\n        .querySelector(`[data-id=\"${key}\"]`)\n        ?.getBoundingClientRect().left;\n\n      return headerCellLeftBorder < leftBorder - 2;\n    });\n\n    if (hiddenHeaderKeys.length) {\n      if (hiddenHeaderKeys.length === 1) {\n        this._tableElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest',\n          inline: 'start',\n        });\n\n        return;\n      }\n\n      this._tableElement\n        .querySelector(\n          `[data-id=\"${hiddenHeaderKeys[hiddenHeaderKeys.length - 1]}\"]`,\n        )\n        .scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  private _scrollRight() {\n    const rightBorder = this.element.getBoundingClientRect().right;\n\n    const hiddenHeaderKeys = this._headerKeys.filter((key) => {\n      const headerCellRightBorder = this._tableElement\n        .querySelector(`[data-id=\"${key}\"]`)\n        ?.getBoundingClientRect().right;\n\n      return headerCellRightBorder > rightBorder + 2;\n    });\n\n    if (hiddenHeaderKeys.length) {\n      this._tableElement\n        .querySelector(`[data-id=\"${hiddenHeaderKeys[0]}\"]`)\n        .scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  /**\n   * Order table row properties by the header keys\n   */\n  private _sortCellProperties(row: CDataTableDataItemPrivate) {\n    const sorted = Object.entries(row)\n      .filter(([key]) => ![...this.hiddenHeaders, '_hiddenData'].includes(key))\n      .sort(\n        ([keyA], [keyB]) =>\n          this._headerKeys.indexOf(keyA) - this._headerKeys.indexOf(keyB),\n      );\n\n    return sorted;\n  }\n\n  private _validateProps(data) {\n    if (\n      !!data &&\n      !this._isValidated &&\n      this.selectionProperty !== null &&\n      !data[this.selectionProperty]\n    ) {\n      console.warn(\n        `[C-DATA-TABLE] Invalid selection property '${this.selectionProperty}'. Using row index as a fallback. This may lead to unexpected behavior.`,\n      );\n\n      this._isValidated = true;\n    }\n  }\n\n  render() {\n    const tableClasses = {\n      'c-data-table': true,\n      'c-data-table--hoverable': this.selectable || this._hasHiddenData,\n      'c-data-table--scrollable': this.horizontalScrolling,\n    };\n\n    return (\n      <Host>\n        <table\n          class={tableClasses}\n          ref={(el) => (this._tableElement = el as HTMLTableElement)}\n        >\n          <colgroup>\n            {[\n              ...(this.selectable ? ['_selection'] : []),\n              ...(this.hiddenHeaders.length ? ['_hidden'] : []),\n              ...this._headerKeys,\n            ].map((key) => (\n              <col class={this.sortBy === key && 'sorted-column'}></col>\n            ))}\n          </colgroup>\n          {this._renderTableHeader()}\n          {this._renderTableBody()}\n          {!this.hideFooter && this._renderTableFooter()}\n        </table>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}