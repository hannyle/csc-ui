import{r as i,c as t,h as s,H as e,g as n}from"./p-d0418cc2.js";import{l as r}from"./p-5b81ca3e.js";import{v as o}from"./p-ad90fe4d.js";const h={triggerEvents:"click",exclude:""};function l(i,t,s,e=h){const n=u(e);c(e).forEach((e=>{window.addEventListener(e,(e=>{a(e,i,t,s,n)}),false)}))}function a(i,t,s,e,n){const r=i.target;if(!s.contains(r)&&!d(r,n)){e.call(t)}}function c(i){if(i.triggerEvents){return i.triggerEvents.split(",").map((i=>i.trim()))}return["click"]}function u(i){if(i.exclude){try{return Array.from(document.querySelectorAll(i.exclude))}catch(t){console.warn(`@ClickOutside: Exclude: '${i.exclude}' will not be evaluated. Check your exclude selector syntax.`,t)}}return}function d(i,t){if(i&&t){for(let s of t){if(s.contains(i)){return true}}}return false}const p=":host{--csc-border-radius:4px;--csc-dark-grey:rgb(89, 89, 89);--csc-error:#e71d32;--csc-font-family:'museo-sans', sans-serif;--csc-light-grey:rgb(223, 225, 227);--csc-light-grey-blue:rgb(204, 244, 240);--csc-lightest-grey:rgba(223, 225, 227, 0.5);--csc-link:#025B97;--csc-mid-grey:rgb(140, 140, 140);--csc-primary:rgb(0, 103, 120);--csc-primary-ghost:rgba(0, 103, 120, 0.15);--csc-primary-ghost-hover:rgba(0, 103, 120, 0.25);--csc-primary-hover:rgb(80, 151, 141);--csc-primary-text-hover:rgba(0, 103, 120, 0.15);--csc-success:#51a808;--csc-warning:#ff5800}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}.md-ripple{display:block;position:absolute;pointer-events:none;border-radius:50%;transform:scale(0);background:currentColor;opacity:0.3}.md-ripple.animate{animation:mdRipple 0.7s backwards linear}:host{font-family:var(--csc-font-family)}@keyframes mdRipple{100%{opacity:0;transform:scale(2.5)}}::-ms-reveal{display:none}:host{display:block;cursor:text}.c-input-menu__chevron{fill:currentColor;height:22px;width:22px;min-width:22px;transform:rotate(0deg);transition:transform 0.3s ease-in-out}.c-input-menu__chevron--active{transform:rotate(180deg)}.c-input-menu__input{width:100%;display:flex}.c-input-menu__item-wrapper{position:absolute;width:100%;top:44px;z-index:10;margin-left:calc(var(--c-label-position) * -1)}.c-input-menu__item-wrapper--shadow{top:47px}.c-input-menu__items{position:absolute;background-color:#ffffff;min-width:calc(100% + 24px);box-shadow:0 8px 16px 0 rgba(0, 0, 0, 0.2);z-index:10;user-select:none;border-radius:4px;margin:0 -12px;overflow-y:scroll;list-style:none;padding:0}.c-input-menu__items--hidden{display:none}.c-input-menu__items li{cursor:pointer;display:flex;height:48px;padding:0 12px;transition:background-color 0.3s;font-size:14px;align-items:center;justify-content:flex-start;color:rgba(0, 0, 0, 0.87)}.c-input-menu__items li.dense{padding:10px 14px}.c-input-menu__items li:hover{background-color:var(--csc-primary-text-hover)}.c-input-menu__items li[aria-selected=true]{background-color:var(--csc-primary-text-hover)}.c-input-menu__items li.none{color:rgba(0, 0, 0, 0.5)}.c-input-menu__items--empty li{color:rgba(0, 0, 0, 0.54);cursor:default;gap:8px;pointer-events:none}.c-input-menu__items--empty li svg{fill:currentColor;height:18px;width:18px}input{max-height:32px;padding:8px 0 8px;background-color:transparent;border:none;color:rgba(0, 0, 0, 0.87);flex:1 1 auto;font-family:\"museo-sans\", sans-serif;font-size:16px;line-height:20px;max-width:100%;min-width:0;width:100%;pointer-events:none}input:focus,input:active{outline:none}input::-ms-reveal{display:none}svg{fill:currentColor;height:22px;width:22px}.c-input--disabled{color:var(--csc-mid-grey)}.c-input:focus-within{color:var(--csc-primary)}.c-input--error{color:var(--csc-error)}.c-input--error:focus-within{color:var(--csc-error)}.visuallyhidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}";const f=class{constructor(e){i(this,e);this.changeValue=t(this,"changeValue",3);this._itemRefs=[];this._outerWrapperClasses=["outer-wrapper"];this._uniqueId=o();this._validationClasses=["validation-message"];this._debounce=null;this._observer=new IntersectionObserver(((i,t)=>{i.forEach((i=>{if(!i.isIntersecting){i.target.scrollIntoView({block:"nearest",inline:"nearest"});t.unobserve(i.target)}else{t.unobserve(i.target)}}))}),{threshold:1});this._lastKeyPressTime=null;this._searchString="";this._blurred=false;this._getListItem=(i,t)=>{const e=this.items[this.currentIndex]===i;const n={none:i.value===null};let r="none";if(typeof(i===null||i===void 0?void 0:i.value)==="string"){r=i.value.replace(/[^a-zA-Z0-9-_]/g,"")}r=`item_${this._id}--${r}`;const o={role:"option","aria-posinset":(t+1).toString(),"aria-setsize":this.items.length.toString()};if(e){o["aria-selected"]="true"}return s("li",Object.assign({},o,{id:r,ref:t=>this._itemRefs.push({value:i.value,ref:t}),class:n,onClick:t=>this._select(t,i)}),i.name)};this.autofocus=false;this.disabled=false;this.hideDetails=false;this.hint="";this.hostId=undefined;this.label=undefined;this.shadow=false;this.name=undefined;this.required=false;this.returnValue=undefined;this.valid=true;this.validate=false;this.validateOnBlur=false;this.validation="Required field";this.itemsPerPage=6;this.placeholder="";this.value=null;this.items=[];this.menuVisible=false;this.currentIndex=null;this.activeListItemId=null;this.statusText="";this.previousValue={value:"",name:""}}validateChange(i){if(i){this._runValidate()}}onCurrentIndexChange(i){var t,s,e;const n=Array.from(((t=this._listElement)===null||t===void 0?void 0:t.children)||[]);this.activeListItemId=(e=(s=n[i])===null||s===void 0?void 0:s.id)!==null&&e!==void 0?e:null;this._updateStatusText()}_valueChangedHandler(i){function t(t){return t.value===(i===null||i===void 0?void 0:i.value)}this.currentIndex=this.items.findIndex(t);const s=this.returnValue?i===null||i===void 0?void 0:i.value:{name:i===null||i===void 0?void 0:i.name,value:i===null||i===void 0?void 0:i.value};if(this.previousValue.value===(i===null||i===void 0?void 0:i.value))return;this.previousValue=i;this.changeValue.emit(s)}_getLabel(){var i,t,s;if(this.returnValue&&["number","string","boolean"].includes(typeof this.value)){return(t=(i=this.items)===null||i===void 0?void 0:i.find((i=>i.value===this.value)))===null||t===void 0?void 0:t.name}return(s=this.value)===null||s===void 0?void 0:s.name}_scrollToElement(){var i;if(this.items.length>this.itemsPerPage){const t=(i=this._itemRefs.find((i=>i.value===this.items[this.currentIndex].value)))===null||i===void 0?void 0:i.ref;if(!!t){this._observer.observe(t)}}}handleKeyDown(i){if(this.disabled)return;const t=/^[0-9a-zA-Z]+$/;if(i.key.match(t)&&i.key.length===1){if(Date.now()-this._lastKeyPressTime>3e3||this._searchString.length>2){this._searchString=i.key}else{this._searchString=`${this._searchString}${i.key}`}this._lastKeyPressTime=Date.now();const s=this.items.find((i=>i.name.toLowerCase().startsWith(this._searchString)));function e(i){return i===s}if(s){if(this.menuVisible){this.currentIndex=this.items.findIndex(e);this._scrollToElement()}else{this.value=s;this._valueChangedHandler(s)}}}if(i.key==="Home"&&this.menuVisible){i.preventDefault();this.currentIndex=0}if(i.key==="End"&&this.menuVisible){i.preventDefault();this.currentIndex=this.items.length-1}if(i.key==="Tab"){this.menuVisible=false}if(i.key==="ArrowDown"){i.preventDefault();this.menuVisible=true;if(this.currentIndex===null){this.currentIndex=0}else if(this.currentIndex+1<this.items.length){this.currentIndex+=1}}if(i.key==="ArrowUp"){i.preventDefault();this.menuVisible=true;if(this.currentIndex>0){this.currentIndex-=1}else if(this.currentIndex===null){this.currentIndex=this.items.length-1}}if(i.key===" "){if(!this.menuVisible){this.menuVisible=true}}if(i.key==="Escape"){const n=this.host.shadowRoot.querySelector("input");if(this.menuVisible){this.menuVisible=false;n.focus()}}if(i.key==="Enter"){this.menuVisible=!this.menuVisible;if(this.currentIndex!==null){this._selectItem()}}}componentWillLoad(){var i,t;this._id=(t=(i=this.hostId)===null||i===void 0?void 0:i.replace(/[^a-zA-Z0-9-_]/g,""))!==null&&t!==void 0?t:this._uniqueId;this._inputId="input_"+(this.hostId||this.label||this.placeholder).replace(/[^a-zA-Z0-9-_]/g,"")}componentDidLoad(){if((this.value||typeof this.value==="boolean")&&!this.currentIndex&&this.currentIndex!==0){this.currentIndex=this.items.findIndex((i=>i.value===this.value))}}disconnectedCallback(){this._observer.disconnect()}_selectItem(){const i=this.items[this.currentIndex];this.value=i;this._valueChangedHandler(i);this._scrollToElement()}_showMenu(){if(this.disabled)return;this._inputElement.focus();setTimeout((()=>{this.menuVisible=true}),0)}_hideMenu(){this.menuVisible=false;this._blurred=true}_select(i,t){i.preventDefault();i.stopPropagation();this.value=t;this._valueChangedHandler(t);this.menuVisible=false}_runValidate(){if(this.required&&!this.value&&(this._blurred||!this.validateOnBlur)){this._outerWrapperClasses.push("required");this._validationClasses.push("show")}else{this._outerWrapperClasses=this._outerWrapperClasses.filter((i=>i!=="required"));this._validationClasses=this._validationClasses.filter((i=>i!=="show"))}}_renderChevron(){const i={"c-input-menu__chevron":true,"c-input-menu__chevron--active":this.menuVisible};return s("svg",{class:i,viewBox:"0 0 24 24"},s("path",{d:r}))}_renderInputElement(){var i,t;return s("div",{class:"c-input-menu__input",onClick:()=>this._showMenu()},s("input",{"aria-controls":"results_"+this._id,"aria-readonly":"true","aria-haspopup":"listbox",id:this._inputId,ref:i=>this._inputElement=i,autocomplete:"off",class:"c-input__input",type:"text",value:(i=this._getLabel())!==null&&i!==void 0?i:null,name:(t=this.name)!==null&&t!==void 0?t:null,readonly:"true"}))}_renderMenu(i){return s("div",{class:{"c-input-menu__item-wrapper":true,"c-input-menu__item-wrapper--shadow":this.shadow}},s("ul",{id:"results_"+this._id,"aria-activedescendant":this.activeListItemId,"aria-expanded":this.menuVisible.toString(),style:i,title:this.label||this.placeholder,class:this.menuVisible?"c-input-menu__items":"c-input-menu__items c-input-menu__items--hidden",role:"listbox",ref:i=>this._listElement=i},this.items.map(((i,t)=>this._getListItem(i,t)))))}_updateStatusText(){if(this._debounce!==null){clearTimeout(this._debounce);this._debounce=null}this._debounce=window.setTimeout((()=>{const i=!!this.items.length?", to navigate use up and down arrows":"";const t=this.host.shadowRoot.querySelector('li[aria-selected="true"]');const s=!!t?`${t.innerHTML} ${t.ariaPosInSet} of ${t.ariaSetSize} is highlighted`:null;this.statusText=`${s||i}`;this._debounce=null}),1400)}render(){let i={};if(this.itemsPerPage&&this.itemsPerPage>0&&this.items.length>this.itemsPerPage){i={"max-height":48*this.itemsPerPage+"px","overflow-y":"scroll"}}return s(e,{ref:i=>l(this,i,(()=>this._hideMenu()))},s("div",{id:"announce-"+this._id,class:"visuallyhidden","aria-live":"polite","aria-atomic":"true"},this.statusText),s("c-input",{autofocus:this.autofocus,disabled:this.disabled,"hide-details":this.hideDetails,hint:this.hint,id:this.hostId,"input-id":this._inputId,label:this.label,name:this.name,placeholder:this.placeholder,required:this.required,shadow:this.shadow,valid:this.valid,validate:this.validate,"validate-on-blur":this.validateOnBlur,validation:this.validation,value:this.value,variant:"select"},s("slot",{name:"pre",slot:"pre"}),s("div",{class:"c-input__content"},this._renderInputElement(),this._renderMenu(i),this._renderChevron()),s("slot",{name:"post",slot:"post"})),s("slot",null))}get host(){return n(this)}static get watchers(){return{validate:["validateChange"],currentIndex:["onCurrentIndexChange"]}}};f.style=p;export{f as c_select};
//# sourceMappingURL=p-6d30060a.entry.js.map