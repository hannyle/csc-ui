{"version":3,"file":"c-swiper.js","sourceRoot":"","sources":["../../../src/components/c-swiper/c-swiper.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Event,\n  EventEmitter,\n  h,\n  Listen,\n  Prop,\n  State,\n} from '@stencil/core';\nimport { Swiper, Navigation, SwiperOptions } from 'swiper';\nimport { mdiChevronLeft, mdiChevronRight } from '@mdi/js';\n\n/**\n * @group Content Selectors\n * @slot - Default slot for the c-swiper-tab elements\n */\n@Component({\n  tag: 'c-swiper',\n  styleUrl: 'c-swiper.scss',\n  shadow: false,\n})\nexport class CSwiper {\n  /**\n   * Value of the swiper\n   */\n  @Prop({ reflect: true, mutable: true }) value: number | string;\n\n  @State() isBeginning = true;\n\n  @State() isEnd = false;\n\n  /**\n   * Emit value change to the parent\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter<number | string>;\n\n  private _container?: HTMLDivElement;\n\n  private _wrapper?: HTMLDivElement;\n\n  private _swiper: Swiper;\n\n  private _options: SwiperOptions;\n\n  @Listen('changeValue')\n  onTabClick(event: MouseEvent) {\n    this.value = event.detail;\n\n    this.slotItems.forEach((child) => {\n      child.active = child.value === event.detail;\n    });\n  }\n\n  @Listen('focusTab', { passive: true })\n  onTabFocus(event: CustomEvent<number | string>) {\n    const index = (event.target as HTMLCSwiperTabElement).dataset.index;\n\n    this._slideToTab(index);\n  }\n\n  @Listen('keyup', { capture: true })\n  handleKeyUp(ev: KeyboardEvent) {\n    const isArrowLeft = ev.key === 'ArrowLeft';\n    const isArrowRight = ev.key === 'ArrowRight';\n    const isBeginning = +this.value === 1;\n    const isEnd = +this.value === this.slotItems.length;\n\n    if (!isArrowRight && !isArrowLeft) return;\n\n    if (isArrowLeft) {\n      this.value = (\n        isBeginning ? this.slotItems.length : +this.value - 1\n      ).toString();\n    }\n\n    if (isArrowRight) {\n      this.value = (isEnd ? 1 : +this.value + 1).toString();\n    }\n\n    this._slideToTab(+this.value - 1);\n\n    this.slotItems.forEach((child) => {\n      const isActive = child.value === this.value;\n\n      child.active = isActive;\n\n      if (isActive) {\n        child.focus();\n      }\n    });\n\n    this.changeValue.emit(this.value);\n  }\n\n  get slotItems() {\n    return Array.from(this._wrapper.children) as HTMLCSwiperTabElement[];\n  }\n\n  private _slideToTab(index) {\n    this._swiper.slideTo(index);\n    this._swiper.update();\n  }\n\n  componentDidLoad() {\n    this._options = {\n      modules: [Navigation],\n      breakpointsBase: 'container',\n      loop: false,\n      speed: 300,\n      slideToClickedSlide: true,\n      slidesPerView: 1,\n      spaceBetween: 8,\n      threshold: 4,\n      breakpoints: {\n        480: {\n          slidesPerView: 2,\n        },\n        720: {\n          slidesPerView: 3,\n        },\n        960: {\n          slidesPerView: 4,\n        },\n      },\n      navigation: {\n        nextEl: '.c-icon-button--next',\n        prevEl: '.c-icon-button--prev',\n      },\n      keyboard: true,\n    };\n\n    this._initSwiper();\n  }\n\n  private _initSwiper() {\n    for (const [index, slide] of this.slotItems.entries()) {\n      slide.classList.add('swiper-slide');\n      slide.setAttribute('data-index', index.toString());\n      slide.value = slide.value ?? index;\n      slide.active = this.value === slide.value;\n      slide.position = index + 1;\n      slide.setsize = this.slotItems.length;\n    }\n\n    this._swiper = new Swiper(this._container, {\n      ...this._options,\n    });\n\n    this._swiper.on('activeIndexChange', ({ isBeginning, isEnd }) => {\n      this.isBeginning = isBeginning;\n      this.isEnd = isEnd;\n    });\n\n    this._slideToTab(\n      this.slotItems?.findIndex((item) => item.value === this.value) || 0,\n    );\n  }\n\n  render() {\n    return (\n      <div class=\"c-swiper swiper\">\n        <div\n          class=\"swiper-container\"\n          ref={(el) => (this._container = el as HTMLDivElement)}\n        >\n          <div\n            role=\"tablist\"\n            class=\"swiper-wrapper\"\n            ref={(el) => (this._wrapper = el as HTMLDivElement)}\n          >\n            <slot></slot>\n          </div>\n\n          <div class=\"c-swiper__navigation\">\n            <c-icon-button\n              aria-disabled={this.isBeginning ? 'true' : 'false'}\n              aria-label=\"previous page\"\n              class=\"c-icon-button--prev\"\n              disabled={this.isBeginning}\n              size=\"small\"\n              ghost\n            >\n              <span class=\"visuallyhidden\">\n                Previous\n                <span>page</span>\n              </span>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d={mdiChevronLeft} />\n              </svg>\n            </c-icon-button>\n\n            <c-icon-button\n              aria-disabled={this.isEnd ? 'true' : 'false'}\n              aria-label=\"next page\"\n              class=\"c-icon-button--next\"\n              disabled={this.isEnd}\n              size=\"small\"\n              ghost\n            >\n              <span class=\"visuallyhidden\">\n                Next\n                <span>page</span>\n              </span>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d={mdiChevronRight} />\n              </svg>\n            </c-icon-button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]}