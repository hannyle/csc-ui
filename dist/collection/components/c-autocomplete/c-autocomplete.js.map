{"version":3,"file":"c-autocomplete.js","sourceRoot":"","sources":["../../../src/components/c-autocomplete/c-autocomplete.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Element,\n  Host,\n  Prop,\n  State,\n  h,\n  Listen,\n  Event,\n  EventEmitter,\n  Watch,\n  Method,\n} from '@stencil/core';\nimport { mdiChevronDown, mdiAlert } from '@mdi/js';\nimport { v4 as uuid } from 'uuid';\nimport { CAutocompleteItem } from '../../types';\n\n/**\n * @group Form\n */\n@Component({\n  tag: 'c-autocomplete',\n  styleUrl: '../c-input/c-input-menu.scss',\n  shadow: true,\n})\nexport class CAutocomplete {\n  /**\n   * Auto focus the input\n   */\n  @Prop() autofocus = false;\n\n  /**\n    Render custom menu\n  */\n\n  @Prop() customMenu = false;\n\n  /**\n   * Disable the input\n   */\n  @Prop() disabled = false;\n\n  /**\n   * Hide the hint and error messages\n   */\n  @Prop() hideDetails = false;\n\n  /**\n   * Hint text for the input\n   */\n  @Prop() hint = '';\n\n  /**\n   * Id of the element\n   */\n  @Prop({ attribute: 'id' }) hostId: string;\n\n  /**\n   * Shadow variant\n   */\n  @Prop() shadow = false;\n\n  /**\n   * Input field name\n   */\n  @Prop() name: string;\n\n  /**\n   * Element label\n   */\n  @Prop() label: string;\n\n  /**\n   * Search string\n   */\n  @Prop({ mutable: true }) query: string = null;\n\n  /**\n   * Selected item\n   */\n  @Prop({ mutable: true }) value: string | number | CAutocompleteItem = null;\n\n  /**\n   * Dense variant\n   */\n  @Prop() dense: boolean;\n\n  /**\n   * Show required validation\n   */\n  @Prop() required = false;\n\n  /**\n   * Set the validíty of the input\n   */\n  @Prop() valid = true;\n\n  /**\n   * Manual validation\n   */\n  @Prop() validate = false;\n\n  /**\n   * Validate the input on blur\n   */\n  @Prop() validateOnBlur = false;\n\n  /**\n   * Custom validation message\n   */\n  @Prop() validation = 'Required field';\n\n  /**\n   * Placeholder text\n   */\n  @Prop() placeholder = '';\n\n  /**\n   * Return only the item value rather than the whole item object\n   */\n  @Prop() returnValue: false;\n\n  /**\n   * Items to be selected\n   */\n  @Prop() items: CAutocompleteItem[] = [];\n\n  /**\n   * Items per page before adding scroll\n   */\n  @Prop() itemsPerPage: number;\n\n  /**\n   * Triggered when text is typed\n   */\n  @Event() changeQuery: EventEmitter;\n\n  /**\n   * Triggered when an item is selected\n   */\n  @Event({ bubbles: false }) changeValue: EventEmitter;\n\n  /**\n   * Sets the value of the autocomplete externally\n   */\n  @Method()\n  async setValue(event, item) {\n    this._select(event, item);\n  }\n\n  private _valueChangedHandler(item: string | number | CAutocompleteItem) {\n    function isItem(element) {\n      return element === item;\n    }\n\n    this.currentIndex = this.items.findIndex(isItem);\n\n    const value = this.returnValue ? (item as CAutocompleteItem)?.value : item;\n\n    this.changeValue.emit(value);\n  }\n\n  private _itemRefs: { value: string | number | boolean; ref: HTMLElement }[] =\n    [];\n\n  private _id: string;\n\n  private _inputId: string;\n\n  private _uniqueId = uuid();\n\n  private _direction = null;\n\n  private _debounce = null;\n\n  @Element() host: HTMLCAutocompleteElement;\n\n  @State() menuVisible = false;\n\n  @State() currentIndex: number = null;\n\n  @State() statusText = '';\n\n  @Watch('items')\n  watchHandler(newValue, oldValue) {\n    if (newValue.length !== oldValue.length) {\n      this.currentIndex = !!newValue.length ? 0 : null;\n\n      this._updateStatusText();\n    }\n  }\n\n  @Listen('keydown', { passive: true })\n  handleKeyDown(ev: KeyboardEvent) {\n    if (ev.key === 'Escape') {\n      this.menuVisible = false;\n      this.currentIndex = null;\n\n      return;\n    }\n\n    if (ev.key === 'Tab') {\n      this.menuVisible = false;\n\n      const item = this.items[this.currentIndex];\n\n      if (!item) return;\n\n      const { name, value } = item;\n\n      this.query = name;\n      this.changeValue.emit(this.returnValue ? value : item);\n    }\n\n    if (ev.key === 'ArrowDown') {\n      this._direction = 'end';\n      ev.preventDefault();\n\n      if (!this.menuVisible) {\n        this.menuVisible = true;\n\n        return;\n      }\n\n      if (this.currentIndex === null) {\n        this.currentIndex = 0;\n      } else if (this.currentIndex + 1 < this.items.length) {\n        this.currentIndex += 1;\n      }\n\n      if (this.customMenu && this.currentIndex > 0) {\n        const currentItem = this._getItemRef(this.currentIndex);\n        const prevItem = this._getItemRef(this.currentIndex - 1);\n        prevItem.toggleAttribute('aria-selected');\n        currentItem.setAttribute('aria-selected', 'true');\n      }\n\n      this._scrollToElement();\n    }\n\n    if (ev.key === 'ArrowUp') {\n      this._direction = 'start';\n      ev.preventDefault();\n\n      if (!this.menuVisible) {\n        this.menuVisible = true;\n\n        return;\n      }\n\n      if (this.currentIndex > 0) {\n        this.currentIndex -= 1;\n      } else if (this.currentIndex === null) {\n        this.currentIndex = this.items.length - 1;\n      }\n\n      if (this.customMenu && this.currentIndex >= 0) {\n        const currentItem = this._getItemRef(this.currentIndex);\n        const prevItem = this._getItemRef(this.currentIndex + 1);\n        prevItem.toggleAttribute('aria-selected');\n        currentItem.setAttribute('aria-selected', 'true');\n      }\n\n      this._scrollToElement();\n    }\n\n    if (ev.keyCode === 32) {\n      if (!this.menuVisible) {\n        this.menuVisible = true;\n        ev.preventDefault();\n      }\n    }\n\n    if (ev.key === 'Enter') {\n      if (this.currentIndex !== null) {\n        const selectedItem = this.items[this.currentIndex];\n        this._select(ev, selectedItem);\n        this.menuVisible = false;\n      }\n    }\n  }\n\n  private _getItemRef(index) {\n    const itemRef = this._itemRefs.find(\n      (item) => item.value === this.items[index].value,\n    )?.ref;\n\n    return itemRef;\n  }\n\n  private _observer = new IntersectionObserver(\n    (entries, observer) => {\n      entries.forEach((entry) => {\n        if (!entry.isIntersecting) {\n          entry.target.scrollIntoView({\n            block: this._direction,\n            inline: 'nearest',\n          });\n          observer.unobserve(entry.target);\n        } else {\n          observer.unobserve(entry.target);\n        }\n      });\n    },\n    { threshold: 1 },\n  );\n\n  private _scrollToElement() {\n    if (this.items.length > this.itemsPerPage) {\n      const itemRef = this._getItemRef(this.currentIndex);\n\n      if (!!itemRef) {\n        this._observer.observe(itemRef);\n      }\n    }\n\n    this._updateStatusText();\n  }\n\n  private _updateStatusText() {\n    this.statusText = this.query;\n\n    if (this._debounce !== null) {\n      clearTimeout(this._debounce);\n      this._debounce = null;\n    }\n\n    this._debounce = window.setTimeout(() => {\n      const word = this.items.length === 1 ? 'suggestion' : 'suggestions';\n      const ending = !!this.items.length\n        ? ', to navigate use up and down arrows'\n        : '.';\n\n      const selection = this.host.shadowRoot.querySelector(\n        'li[aria-selected=\"true\"]',\n      );\n\n      const selectionText = !!selection\n        ? `. ${selection.innerHTML} ${selection.ariaPosInSet} of ${selection.ariaSetSize} is highlighted`\n        : null;\n\n      this.statusText = `${this.items.length} ${word} found${\n        selectionText || ending\n      }`;\n\n      this._debounce = null;\n    }, 1400);\n  }\n\n  private handleChange(event) {\n    this.menuVisible = true;\n    this.query = event.target.value;\n    this.changeQuery.emit(this.query);\n    this.changeValue.emit(null);\n\n    if (!this.query.length) {\n      this.statusText = '';\n    }\n  }\n\n  private _select(event, item) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.query = item.name;\n    this.value = item;\n    this._valueChangedHandler(item);\n    this.menuVisible = false;\n  }\n\n  componentWillLoad() {\n    this._id = this.hostId?.replace(/[^a-zA-Z0-9-_]/g, '') ?? this._uniqueId;\n    this._inputId =\n      'input_' +\n      (this.hostId || this.label || this.placeholder).replace(\n        /[^a-zA-Z0-9-_]/g,\n        '',\n      );\n  }\n\n  componentDidLoad() {\n    window.addEventListener('click', (event: MouseEvent) => {\n      if (!(event.target as HTMLElement).matches('c-autocomplete')) {\n        this.menuVisible = false;\n        this.currentIndex = null;\n      }\n    });\n  }\n\n  disconnectedCallback() {\n    this._observer.disconnect();\n  }\n\n  private _getActiveListItemId() {\n    return `option--${this._id}-${this.currentIndex}`;\n  }\n\n  private _handleFocus(event: FocusEvent) {\n    const { value } = event.target as HTMLInputElement;\n\n    if (!!value) {\n      this.menuVisible = true;\n    }\n\n    this.statusText = '';\n\n    this._updateStatusText();\n  }\n\n  private _renderChevron() {\n    const classes = {\n      'c-input-menu__chevron': true,\n      'c-input-menu__chevron--active': this.menuVisible,\n    };\n\n    return (\n      <svg class={classes} viewBox=\"0 0 24 24\">\n        <path d={mdiChevronDown} />\n      </svg>\n    );\n  }\n\n  private _renderEmptyMenu() {\n    return (\n      <ul class=\"c-input-menu__items c-input-menu__items--empty\">\n        <li tabindex=\"-1\">\n          <svg viewBox=\"0 0 24 24\">\n            <path d={mdiAlert} />\n          </svg>\n          No suggestions found\n        </li>\n      </ul>\n    );\n  }\n\n  private _renderCustomMenu(style) {\n    if (this.currentIndex === 0 && this.menuVisible) {\n      const selectedItem = document.querySelectorAll(\n        'div[aria-selected = \"true\"]',\n      );\n\n      if (selectedItem.length === 1) {\n        /**\n          When currentIndex is 0 and there is no query text,\n          remove aria-selected attribute from current highlighted item\n         */\n        selectedItem[0].toggleAttribute('aria-selected');\n      }\n\n      const currentItem = this._getItemRef(this.currentIndex);\n      currentItem.setAttribute('aria-selected', 'true');\n    }\n\n    return (\n      <div\n        class={{\n          'c-input-menu__item-wrapper': true,\n          'c-input-menu__item-wrapper--shadow': this.shadow,\n        }}\n      >\n        {!!this.items.length && this.menuVisible && (\n          <div\n            id={'results_' + this._id}\n            class={\n              this.menuVisible\n                ? 'c-input-menu__items'\n                : 'c-input-menu__items c-input-menu__items--hidden'\n            }\n            style={style}\n          >\n            <slot name=\"customMenu\" />\n          </div>\n        )}\n        {!this.items.length &&\n          this.menuVisible &&\n          this.query.length > 0 &&\n          this._renderEmptyMenu()}\n      </div>\n    );\n  }\n\n  private _renderMenu(style) {\n    return (\n      <div\n        class={{\n          'c-input-menu__item-wrapper': true,\n          'c-input-menu__item-wrapper--shadow': this.shadow,\n        }}\n      >\n        {!!this.items.length && (\n          <ul\n            id={'results_' + this._id}\n            class={\n              this.menuVisible\n                ? 'c-input-menu__items'\n                : 'c-input-menu__items c-input-menu__items--hidden'\n            }\n            role=\"listbox\"\n            style={style}\n          >\n            {this.menuVisible &&\n              this.items.map((item, index) => (\n                <li\n                  id={`option--${this._id}-${index}`}\n                  aria-posinset={(index + 1).toString()}\n                  aria-setsize={this.items.length.toString()}\n                  aria-selected={(this.currentIndex === index).toString()}\n                  role=\"option\"\n                  tabindex=\"-1\"\n                  ref={(el) => {\n                    item.ref = el as HTMLElement;\n                    this._itemRefs.push({\n                      value: item.value,\n                      ref: el as HTMLElement,\n                    });\n                  }}\n                  onClick={(event) => this._select(event, item)}\n                >\n                  {item.name}\n                </li>\n              ))}\n          </ul>\n        )}\n        {!this.items.length && this.menuVisible && this._renderEmptyMenu()}\n      </div>\n    );\n  }\n\n  private _renderInputElement() {\n    return (\n      <div class=\"c-input-menu__input\">\n        <input\n          type=\"text\"\n          aria-expanded={this.menuVisible.toString()}\n          aria-owns={'results_' + this._id}\n          aria-autocomplete=\"list\"\n          aria-activedescendant={this._getActiveListItemId()}\n          autocomplete=\"off\"\n          class=\"c-input__input\"\n          role=\"combobox\"\n          value={this.query}\n          name={this.name ?? null}\n          onInput={(event) => this.handleChange(event)}\n          onFocus={(event) => this._handleFocus(event)}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    this._itemRefs = [];\n    let itemsPerPageStyle = {};\n\n    if (\n      this.itemsPerPage &&\n      this.itemsPerPage > 0 &&\n      this.items.length > this.itemsPerPage\n    ) {\n      itemsPerPageStyle = {\n        'max-height': 48 * this.itemsPerPage + 'px',\n      };\n    }\n\n    if (this.customMenu) {\n      const slotContent = document.querySelectorAll('[slot=\"customMenu\"]');\n\n      for (let i = 0; i < this.items.length; i++) {\n        this._itemRefs.push({\n          value: this.items[i].value,\n          ref: slotContent[i] as HTMLElement,\n        });\n      }\n    }\n\n    return (\n      <Host>\n        <div\n          id={'announce-' + this._id}\n          class=\"visuallyhidden\"\n          aria-live=\"polite\"\n          aria-atomic=\"true\"\n        >\n          {this.statusText}\n        </div>\n\n        <c-input\n          autofocus={this.autofocus}\n          disabled={this.disabled}\n          hide-details={this.hideDetails}\n          hint={this.hint}\n          id={this.hostId}\n          input-id={this._inputId}\n          label={this.label}\n          name={this.name}\n          placeholder={this.placeholder}\n          required={this.required}\n          shadow={this.shadow}\n          valid={this.valid}\n          validate={this.validate}\n          validate-on-blur={this.validateOnBlur}\n          validation={this.validation}\n          value={this.query}\n        >\n          <slot name=\"pre\" slot=\"pre\"></slot>\n\n          <div class=\"c-input__content\">\n            {this._renderInputElement()}\n            {this.customMenu\n              ? this._renderCustomMenu(itemsPerPageStyle)\n              : this._renderMenu(itemsPerPageStyle)}\n            {this._renderChevron()}\n          </div>\n\n          <slot name=\"post\" slot=\"post\"></slot>\n        </c-input>\n      </Host>\n    );\n  }\n}\n"]}