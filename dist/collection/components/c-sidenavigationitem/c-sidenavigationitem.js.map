{"version":3,"file":"c-sidenavigationitem.js","sourceRoot":"","sources":["../../../src/components/c-sidenavigationitem/c-sidenavigationitem.tsx"],"names":[],"mappings":"AAAA,OAAO,EACL,SAAS,EACT,CAAC,EACD,IAAI,EACJ,IAAI,EACJ,OAAO,EACP,KAAK,EAEL,KAAK,GACN,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,eAAe,EAAE,MAAM,SAAS,CAAC;AAU1C,MAAM,OAAO,mBAAmB;;IAwEtB,oBAAe,GAAG,KAAK,CAAC;;;kBAxDP,IAAI;mBAKX,KAAK;;EASvB,cAAc,CAAC,MAAe;IAC5B,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC;EAC3C,CAAC;EAIO,2BAA2B,CAAC,SAAkB;IACpD,IAAI,CAAC,IAAI,CAAC,eAAe;MAAE,OAAO;IAElC,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CACzB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC,QAAQ,CAC/D,CAAC;IAEF,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAoC,EAAE,EAAE;MACxD,KAAK,CAAC,UAAU,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC;MAC3C,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;IAC9B,CAAC,CAAC,CAAC;EACL,CAAC;EAEO,SAAS,CAAC,KAA4B;IAC5C,IACE,CAAC,KAAK,YAAY,aAAa,IAAI,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,MAAK,OAAO,CAAC;MAC1D,CAAC,CAAC,KAAK,YAAY,aAAa,CAAC,EACjC;MAEA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MAE5B,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;QACzB,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC3D,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;OAC7B;MAED,IAAI,IAAI,CAAC,IAAI,EAAE;QACb,IAAI,IAAI,CAAC,MAAM,EAAE;UACf,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACrC;aAAM;UACL,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;SAClC;OACF;KACF;EACH,CAAC;EAID,iBAAiB;;IACf,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CACrD,qBAAqB,CACtB,CAAC;IAEF,MAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CACzB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,UAAU,CAC3D,CAAC;IAEF,IAAI,CAAC,UAAU,GAAG,MAAA,MAAA,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,0CAAE,SAAS,0CAAE,IAAI,EAAE,CAAC;IAEzE,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;EAChD,CAAC;EAED,MAAM;;IACJ,MAAM,OAAO,GAAG;MACd,uBAAuB,EAAE,IAAI;MAC7B,+BAA+B,EAAE,IAAI,CAAC,eAAe;MACrD,MAAM,EAAE,IAAI,CAAC,MAAM;KACpB,CAAC;IAEF,MAAM,oBAAoB,GAAG;MAC3B,YAAY,EAAE,IAAI,CAAC,MAAM;MACzB,UAAU,EAAE,CAAC,IAAI,CAAC,MAAM;KACzB,CAAC;IAEF,MAAM,IAAI,GAAG;MACX,IAAI,EAAE,UAAU;MAChB,QAAQ,EAAE,GAAG;KACd,CAAC;IAEF,IAAI,IAAI,CAAC,eAAe,EAAE;MACxB,IAAI,CAAC,eAAe,CAAC,GAAG,MAAA,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,0CAAE,QAAQ,EAAE,CAAC;KACrD;SAAM,IAAI,IAAI,CAAC,MAAM,EAAE;MACtB,IAAI,CAAC,cAAc,CAAC,GAAG,MAAM,CAAC;KAC/B;IAED,OAAO,CACL,EAAC,IAAI,oBACC,IAAI,IACR,KAAK,EAAE,OAAO,EACd,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EACjC,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;MAEnC,WACE,KAAK,EAAE;UACL,+BAA+B,EAAE,IAAI;UACrC,2CAA2C,EAAE,IAAI,CAAC,eAAe;SAClE;QAEA,IAAI,CAAC,eAAe,IAAI,CACvB,WAAK,KAAK,EAAC,IAAI,EAAC,MAAM,EAAC,IAAI,EAAC,OAAO,EAAC,WAAW,EAAC,KAAK,EAAC,KAAK;UACzD,YAAM,CAAC,EAAE,eAAe,GAAI,CACxB,CACP;QACD,WAAK,KAAK,EAAC,6BAA6B;UACtC,YAAM,IAAI,EAAC,MAAM,GAAQ,CACrB,CACF;MAEL,IAAI,CAAC,eAAe,IAAI,CACvB,WACE,IAAI,EAAC,SAAS,gBACF,IAAI,CAAC,UAAU,mBACZ,MAAA,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,0CAAE,QAAQ,EAAE,EAC1C,KAAK,EAAE,oBAAoB;QAE3B,YAAM,IAAI,EAAC,YAAY,GAAQ,CAC3B,CACP;MAED,gBACE,IAAI,EAAE,EAAE,EACR,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,EACnB,KAAK,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,GACtB,CACP,CACR,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import {\n  Component,\n  h,\n  Host,\n  Prop,\n  Element,\n  Event,\n  EventEmitter,\n  Watch,\n} from '@stencil/core';\nimport { mdiChevronRight } from '@mdi/js';\n\n/**\n * @parent c-sidenavigation\n */\n@Component({\n  tag: 'c-sidenavigationitem',\n  styleUrl: 'c-sidenavigationitem.scss',\n  shadow: true,\n})\nexport class CSidenavigationitem {\n  @Element() hostElement: HTMLCSidenavigationitemElement;\n\n  /**\n   * Indicate active state\n   */\n  @Prop() active: boolean;\n\n  /**\n   * Hyperlink url\n   */\n  @Prop() href: string;\n\n  /**\n   * Hyperlink target\n   */\n  @Prop() target: string = null;\n\n  /**\n   * Loading state\n   */\n  @Prop() loading = false;\n\n  /**\n   * Emit changes to the c-accordion\n   * @private\n   */\n  @Event() itemChange: EventEmitter;\n\n  @Watch('active')\n  onActiveChange(active: boolean) {\n    this._handleChildFocusableChange(active);\n  }\n\n  private _ariaLabel: string;\n\n  private _handleChildFocusableChange(focusable: boolean) {\n    if (!this._slotHasContent) return;\n\n    const children = Array.from(\n      this.hostElement.querySelector('[slot=\"subnavitem\"]').children,\n    );\n\n    children.forEach((child: HTMLCSubnavigationitemElement) => {\n      child.ariaHidden = (!focusable).toString();\n      child.focusable = focusable;\n    });\n  }\n\n  private _redirect(event: KeyboardEvent | Event) {\n    if (\n      (event instanceof KeyboardEvent && event?.key === 'Enter') ||\n      !(event instanceof KeyboardEvent)\n    ) {\n      // event.stopPropagation();\n      this.itemChange.emit(event);\n\n      if (!this._slotHasContent) {\n        const sidenav = document.querySelector('c-sidenavigation');\n        sidenav.menuVisible = false;\n      }\n\n      if (this.href) {\n        if (this.target) {\n          window.open(this.href, this.target);\n        } else {\n          window.location.href = this.href;\n        }\n      }\n    }\n  }\n\n  private _slotHasContent = false;\n\n  componentWillLoad() {\n    this._slotHasContent = !!this.hostElement.querySelector(\n      '[slot=\"subnavitem\"]',\n    );\n\n    const children = Array.from(\n      this.hostElement.querySelector('[slot=\"main\"]').childNodes,\n    );\n\n    this._ariaLabel = children.find((c) => !!c.nodeValue)?.nodeValue?.trim();\n\n    this._handleChildFocusableChange(this.active);\n  }\n\n  render() {\n    const classes = {\n      'c-sidenavigation-item': true,\n      'c-sidenavigation-item--parent': this._slotHasContent,\n      active: this.active,\n    };\n\n    const subNavigationClasses = {\n      subnavactive: this.active,\n      subnavitem: !this.active,\n    };\n\n    const a11y = {\n      role: 'menuitem',\n      tabindex: '0',\n    };\n\n    if (this._slotHasContent) {\n      a11y['aria-expanded'] = (!!this.active)?.toString();\n    } else if (this.active) {\n      a11y['aria-current'] = 'page';\n    }\n\n    return (\n      <Host\n        {...a11y}\n        class={classes}\n        onClick={(e) => this._redirect(e)}\n        onKeyDown={(e) => this._redirect(e)}\n      >\n        <div\n          class={{\n            'c-sidenavigation-item__header': true,\n            'c-sidenavigation-item__header--expandable': this._slotHasContent,\n          }}\n        >\n          {this._slotHasContent && (\n            <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" class=\"svg\">\n              <path d={mdiChevronRight} />\n            </svg>\n          )}\n          <div class=\"c-sidenavigation-item__slot\">\n            <slot name=\"main\"></slot>\n          </div>\n        </div>\n\n        {this._slotHasContent && (\n          <nav\n            role=\"menubar\"\n            aria-label={this._ariaLabel}\n            aria-expanded={(!!this.active)?.toString()}\n            class={subNavigationClasses}\n          >\n            <slot name=\"subnavitem\"></slot>\n          </nav>\n        )}\n\n        <c-loader\n          size={32}\n          hide={!this.loading}\n          style={{ pointerEvents: 'none' }}\n        ></c-loader>\n      </Host>\n    );\n  }\n}\n"]}